import{r as u,a as Wa,u as Te,L as xe,b as ta,N as Ve,O as aa,d as vt,R as Ue,e as $a,f as U,B as Ya}from"./vendor-DYwYEH-H.js";import{j as Ha,a as Xa}from"./utils-DvjEGWJZ.js";import{L as at,W as Tt,a as lt,b as Mt,U as _e,M as Be,B as Ka,F as ee,D as Le,d as Rt,e as Ga,S as Va,C as sa,f as Je,c as st,g as qa,h as re,i as Ja,j as Qa,k as Za,l as es,m as ts,X as ye,A as as,n as Nt,o as se,P as ra,E as He,p as ot,T as ia,q as Fe,r as ss,s as rs,t as Qe,u as is,v as na,w as ns,R as ls,x as os,y as la,z as cs,G as ds,H as hs,I as ms,J as xs,K as ps,N as us,O as ct,Q as gs,V as Et,Y as fs,Z as bs,_ as ys,$ as js}from"./ui-Chtk5J6c.js";import{R as wt,A as oa,a as ca,C as da,X as ha,Y as ma,T as xa,B as vs,b as Ns}from"./charts-jb_pH9Nw.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var pa={exports:{}},Ze={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ws=u,Ss=Symbol.for("react.element"),ks=Symbol.for("react.fragment"),Cs=Object.prototype.hasOwnProperty,Ds=ws.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_s={key:!0,ref:!0,__self:!0,__source:!0};function ua(r,t,a){var s,n={},i=null,l=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)Cs.call(t,s)&&!_s.hasOwnProperty(s)&&(n[s]=t[s]);if(r&&r.defaultProps)for(s in t=r.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:Ss,type:r,key:i,ref:l,props:n,_owner:Ds.current}}Ze.Fragment=ks;Ze.jsx=ua;Ze.jsxs=ua;pa.exports=Ze;var e=pa.exports,dt={},zt=Wa;dt.createRoot=zt.createRoot,dt.hydrateRoot=zt.hydrateRoot;const ga=u.createContext(void 0),As=({children:r})=>{const[t,a]=u.useState(null),[s,n]=u.useState(!0);u.useEffect(()=>{const c=localStorage.getItem("token"),h=localStorage.getItem("user");if(c&&h)try{Ha(c);const m=JSON.parse(h);a(m)}catch{localStorage.removeItem("token"),localStorage.removeItem("user")}n(!1)},[]);const i=(c,h)=>{localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(h)),a(h)},l=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null)};return e.jsx(ga.Provider,{value:{user:t,login:i,logout:l,isAuthenticated:!!t,isLoading:s},children:r})},Me=()=>{const r=u.useContext(ga);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},I=Xa.create({baseURL:"http://localhost:5000/api"});I.interceptors.request.use(r=>{const t=localStorage.getItem("token");return t&&(r.headers.Authorization=`Bearer ${t}`),r});I.interceptors.response.use(r=>r,r=>{const t=r.code==="ERR_NETWORK"||r.message==="Network Error",a=r.response&&(r.response.status===500||r.response.status===503),s=window.location.pathname==="/maintenance";return(t||a)&&!s&&(window.location.href="/maintenance"),Promise.reject(r)});const Ps=()=>{const[r,t]=u.useState(""),[a,s]=u.useState(""),[n,i]=u.useState(""),[l,c]=u.useState(null),[h,m]=u.useState(null),[d,o]=u.useState("CMS Publishing RuangMusik"),[p,w]=u.useState("checking"),[S,v]=u.useState("checking"),{login:j}=Me(),g=Te();u.useEffect(()=>{(async()=>{v("checking"),w("checking");try{const y=await I.get("/health");v("connected"),y.status===200&&y.data.status==="connected"?w("connected"):w("disconnected")}catch(y){y.response?(v("connected"),w("disconnected")):(v("disconnected"),w("disconnected"))}})(),(async()=>{try{const y=await I.get("/settings");if(y.data){const E="http://localhost:5000/api".replace("/api","");if(y.data.logo){const N=y.data.logo.replace(/\\/g,"/"),A=N.startsWith("http")?N:`${E}/${N}`;c(A)}if(y.data.login_background){const N=y.data.login_background.replace(/\\/g,"/"),A=N.startsWith("http")?N:`${E}/${N}`;m(A)}y.data.company_name&&o(y.data.company_name)}}catch(y){console.error("Failed to fetch settings:",y)}})()},[]);const[C,b]=u.useState({show:!1,status:"",detail:""}),R=async z=>{var x,y,k,E,N;z.preventDefault();try{const A=await I.post("/auth/login",{email:r,password:a});j(A.data.token,A.data.user),A.data.user.role==="admin"?g("/admin"):g("/user")}catch(A){((x=A.response)==null?void 0:x.status)===403&&((k=(y=A.response)==null?void 0:y.data)!=null&&k.status)?(b({show:!0,status:A.response.data.status,detail:A.response.data.detail}),i("")):i(((N=(E=A.response)==null?void 0:E.data)==null?void 0:N.message)||"Login failed")}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center relative bg-gray-50 overflow-hidden",children:[h&&e.jsx("div",{className:"absolute inset-0 z-0 bg-black",children:e.jsx("img",{src:h,alt:"Background",className:"w-full h-full object-cover opacity-60"})}),e.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2 z-20",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/80 backdrop-blur-sm shadow-sm border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Backend:"}),S==="checking"&&e.jsx(at,{size:14,className:"animate-spin text-blue-500"}),S==="connected"&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Tt,{size:14}),e.jsx("span",{className:"text-xs font-bold",children:"Online"})]}),S==="disconnected"&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(lt,{size:14}),e.jsx("span",{className:"text-xs font-bold",children:"Offline"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/80 backdrop-blur-sm shadow-sm border border-gray-200",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Database:"}),p==="checking"&&e.jsx(at,{size:14,className:"animate-spin text-blue-500"}),p==="connected"&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Tt,{size:14}),e.jsx("span",{className:"text-xs font-bold",children:"Connected"})]}),p==="disconnected"&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(lt,{size:14}),e.jsx("span",{className:"text-xs font-bold",children:"Disconnected"})]})]})]}),C.show&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl p-6 w-96 max-w-[90%] transform transition-all scale-100",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`p-4 rounded-full mb-4 ${C.status==="review"?"bg-yellow-100 text-yellow-600":C.status==="rejected"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:e.jsx(at,{size:32,className:C.status==="review"?"animate-spin-slow":""})}),e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-2 capitalize",children:["Status: ",C.status]}),e.jsx("p",{className:"text-gray-500 mb-6",children:C.detail}),e.jsx("button",{onClick:()=>b({...C,show:!1}),className:"glass-button w-full",children:"Close"})]})})}),e.jsxs("div",{className:"glass-panel p-8 w-96 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[l&&e.jsx("img",{src:l,alt:"Logo",className:"h-24 mb-4 object-contain"}),e.jsx("h1",{className:"text-lg font-bold text-[#7A4A88] text-center mb-1",children:d}),e.jsx("h3",{className:"text-xs uppercase tracking-[0.2em] text-gray-400 font-semibold mb-2 mt-1",children:"System Publishing"}),e.jsx("h2",{className:"text-2xl font-bold text-center text-[#7A4A88]",children:"Login"})]}),n&&e.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4 text-sm",children:n}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",value:r,onChange:z=>t(z.target.value),className:"mt-1 block glass-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:"password",value:a,onChange:z=>s(z.target.value),className:"mt-1 block glass-input",required:!0})]}),e.jsx("button",{type:"submit",className:"glass-button w-full",children:"Sign In"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Don't have an account? ",e.jsx(xe,{to:"/register",className:"text-[#7A4A88] hover:text-purple-600",children:"Register"})]})]})]})},Ls=()=>{const[r,t]=u.useState(""),[a,s]=u.useState(""),[n,i]=u.useState(""),[l,c]=u.useState(""),h=Te(),m=async d=>{var o,p;d.preventDefault();try{await I.post("/auth/register",{name:r,email:a,password:n}),h("/login")}catch(w){c(((p=(o=w.response)==null?void 0:o.data)==null?void 0:p.message)||"Registration failed")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"glass-panel p-8 w-96",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-[#7A4A88] mb-6",children:"Register"}),l&&e.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4 text-sm",children:l}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:r,onChange:d=>t(d.target.value),className:"mt-1 block glass-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",value:a,onChange:d=>s(d.target.value),className:"mt-1 block glass-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:"password",value:n,onChange:d=>i(d.target.value),className:"mt-1 block glass-input",required:!0})]}),e.jsx("button",{type:"submit",className:"glass-button w-full",children:"Sign Up"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Already have an account? ",e.jsx(xe,{to:"/login",className:"text-[#7A4A88] hover:text-purple-600",children:"Login"})]})]})})},fa=()=>{const{user:r}=Me(),t=ta(),[a,s]=u.useState(!0),[n,i]=u.useState(!1),[l,c]=u.useState("Mendy"),[h,m]=u.useState(null);u.useEffect(()=>{(async()=>{try{const S=await I.get("/settings");if(S.data&&(S.data.company_name&&c(S.data.company_name),S.data.logo)){const v=S.data.logo.replace(/\\/g,"/"),g="http://localhost:5000/api".replace("/api",""),C=v.startsWith("http")?v:`${g}/${v}`;m(C)}}catch(S){console.error("Failed to fetch settings",S)}})()},[]);const d=[{path:"/admin",label:"Dashboard",icon:Mt},{label:"Publishing",icon:Ka,isGroup:!0,isOpen:a,toggle:()=>s(!a),children:[{path:"/admin/creators",label:"Data Pencipta",icon:_e},{path:"/admin/songs",label:"Data Lagu",icon:Be}]},{label:"Data Report",icon:ee,isGroup:!0,isOpen:n,toggle:()=>i(!n),children:[{path:"/admin/analytics",label:"Analitik",icon:ee},{path:"/admin/reports",label:"Report",icon:ee},{path:"/admin/reports/import",label:"Import",icon:ee}]},{path:"/admin/payments",label:"Pembayaran",icon:Le},{path:"/admin/contracts",label:"Kontrak User",icon:Rt},{path:"/admin/users",label:"User Management",icon:Ga},{path:"/admin/settings",label:"Setting",icon:Va}],o=[{path:"/user",label:"Dashboard",icon:Mt},{label:"Lagu Saya",icon:Be,isGroup:!0,isOpen:a,toggle:()=>s(!a),children:[{path:"/user/creators",label:"Data Pencipta",icon:_e},{path:"/user/songs",label:"Data Lagu",icon:Be}]},{label:"Report Saya",icon:ee,isGroup:!0,isOpen:n,toggle:()=>i(!n),children:[{path:"/user/analytics",label:"Analitik",icon:ee},{path:"/user/reports",label:"Report Lagu",icon:ee},{path:"/user/payments",label:"Pembayaran",icon:Le}]},{path:"/user/contracts",label:"Kontrak",icon:Rt},{path:"/user/account",label:"Akun Saya",icon:_e}],p=(r==null?void 0:r.role)==="admin"?d:o;return e.jsxs("div",{className:"w-64 bg-sidebar h-screen shadow-xl flex flex-col fixed overflow-y-auto z-20 text-gray-400 font-sans",children:[e.jsxs("div",{className:"p-6 flex items-center space-x-3 mb-2",children:[h?e.jsx("img",{src:h,alt:"Logo",className:"w-10 h-10 object-contain rounded-lg bg-white/10 p-1"}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-lg",children:l.charAt(0)}),e.jsx("h1",{className:"text-2xl font-bold text-white tracking-wide",children:l})]}),e.jsx("nav",{className:"flex-1 px-4 space-y-2",children:p.map(w=>{if(w.isGroup)return e.jsxs("div",{children:[e.jsxs("button",{onClick:w.toggle,className:"w-full flex items-center justify-between px-4 py-3 text-sm font-medium rounded-lg text-gray-400 hover:text-white hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w.icon,{className:"w-5 h-5 mr-3"}),w.label]}),w.isOpen?e.jsx(sa,{size:16}):e.jsx(Je,{size:16})]}),w.isOpen&&e.jsx("div",{className:"mt-1 space-y-1",children:w.children.map(j=>{const g=t.pathname===j.path;return e.jsxs(xe,{to:j.path,className:st("flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-all ml-4 border-l border-gray-700 pl-4",g?"text-white border-l-2 border-accent-pink pl-[15px]":"text-gray-500 hover:text-gray-300"),children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current mr-3 opacity-50"}),j.label]},j.path)})})]},w.label);const S=w.icon,v=t.pathname===w.path;return e.jsxs(xe,{to:w.path,className:st("flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all relative overflow-hidden group",v?"text-white bg-sidebar-active":"text-gray-400 hover:text-white hover:bg-white/5"),children:[v&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-accent-pink rounded-r-full"}),e.jsx(S,{className:st("w-5 h-5 mr-3 transition-colors",v?"text-accent-pink":"group-hover:text-white")}),w.label]},w.path)})})]})},ba=()=>{const{user:r,logout:t}=Me(),[a,s]=u.useState("offline"),[n,i]=u.useState("offline");return u.useEffect(()=>{const l=async()=>{try{const h=await I.get("/health");h.status===200&&(s("online"),h.data.status==="connected"?i("online"):i("offline"))}catch{s("offline"),i("offline")}};l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[]),e.jsxs("header",{className:"bg-white h-20 flex items-center justify-between px-8 ml-64 sticky top-0 z-50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("button",{className:"text-gray-400 hover:text-gray-600 lg:hidden",children:e.jsx(qa,{size:24})}),e.jsxs("div",{className:"relative hidden md:block",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2.5 rounded-full bg-gray-50 border border-gray-100 focus:outline-none focus:bg-white focus:ring-2 focus:ring-purple-100 text-sm w-64 transition-all"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-4 mr-4 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",title:"Server Status",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${a==="online"?"bg-green-500 animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500 animate-pulse shadow-[0_0_8px_rgba(239,68,68,0.6)]"}`}),e.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center gap-1",children:[e.jsx(Ja,{size:12}),"Server"]})]}),e.jsx("div",{className:"w-px h-3 bg-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2",title:"Database Status",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${n==="online"?"bg-green-500 animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500 animate-pulse shadow-[0_0_8px_rgba(239,68,68,0.6)]"}`}),e.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center gap-1",children:[e.jsx(Qa,{size:12}),"DB"]})]})]}),e.jsxs("button",{className:"relative text-gray-400 hover:text-purple-600 transition-colors",children:[e.jsx(Za,{size:20}),e.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]}),e.jsxs("button",{className:"relative text-gray-400 hover:text-purple-600 transition-colors",children:[e.jsx(es,{size:20}),e.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full border-2 border-white"})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200 mx-2"}),e.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer group relative",children:[e.jsx("div",{className:"text-right hidden md:block",children:e.jsxs("p",{className:"text-sm font-semibold text-gray-700 group-hover:text-purple-700 transition-colors",children:["Hello, ",r==null?void 0:r.name]})}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-purple-500 to-pink-500 p-0.5",children:e.jsx("div",{className:"w-full h-full rounded-full bg-white flex items-center justify-center overflow-hidden",children:e.jsx(_e,{size:20,className:"text-gray-600"})})}),e.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-100 py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-right z-50",children:e.jsxs("button",{onClick:t,className:"w-full text-left px-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-red-500 flex items-center",children:[e.jsx(ts,{size:16,className:"mr-2"}),"Logout"]})})]})]})]})},Ts=({isOpen:r,onClose:t,content:a})=>r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-md rounded-lg shadow-2xl w-full max-w-lg p-6 border border-white/40 m-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 pb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-[#7A4A88]",children:"Data Pembaruan Aplikasi"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-red-500 transition-colors",children:e.jsx(ye,{size:24})})]}),e.jsx("div",{className:"prose max-w-none text-gray-700 whitespace-pre-wrap max-h-[60vh] overflow-y-auto",children:a||"Tidak ada data pembaruan."}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 bg-[#7A4A88] text-white rounded-md hover:bg-purple-700 transition-colors",children:"Tutup"})})]})}):null,ya=()=>{const[r,t]=u.useState("1.0.0"),[a,s]=u.useState(""),[n,i]=u.useState(!1);u.useEffect(()=>{fetch("/ver.txt").then(c=>c.text()).then(c=>t(c.trim())).catch(c=>console.error("Failed to load version",c)),fetch("/pembaruan.txt").then(c=>c.text()).then(c=>s(c)).catch(c=>console.error("Failed to load update content",c))},[]);const l=new Date().getFullYear();return e.jsxs(e.Fragment,{children:[e.jsx("footer",{className:"bg-white/30 backdrop-blur-md border-t border-white/20 py-4 px-6 ml-64 mt-auto",children:e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("span",{children:["Copyright © ",l," RuangMusik Publishing"]}),e.jsx("span",{children:"•"}),e.jsxs("button",{onClick:()=>i(!0),className:"hover:text-[#7A4A88] hover:underline font-medium transition-colors focus:outline-none",children:["Versi ",r]})]}),e.jsxs("div",{children:["Build By ",e.jsx("span",{className:"font-semibold text-[#7A4A88]",children:"Garuda Server"})]})]})}),e.jsx(Ts,{isOpen:n,onClose:()=>i(!1),content:a})]})},Ms=()=>{const{user:r,isLoading:t}=Me();return t?e.jsx("div",{children:"Loading..."}):!r||r.role!=="admin"?e.jsx(Ve,{to:"/login",replace:!0}):e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(fa,{}),e.jsxs("div",{className:"flex-1 flex flex-col relative z-0",children:[e.jsx(ba,{}),e.jsx("main",{className:"flex-1 p-6 ml-64 overflow-auto",children:e.jsx(aa,{})}),e.jsx(ya,{})]})]})},Rs=()=>{const{user:r,isLoading:t}=Me();return t?e.jsx("div",{children:"Loading..."}):r?r.role==="admin"?e.jsx(Ve,{to:"/admin",replace:!0}):e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(fa,{}),e.jsxs("div",{className:"flex-1 flex flex-col relative z-0",children:[e.jsx(ba,{}),e.jsx("main",{className:"flex-1 p-6 ml-64 overflow-auto",children:e.jsx(aa,{})}),e.jsx(ya,{})]})]}):e.jsx(Ve,{to:"/login",replace:!0})},ke=({title:r,value:t,icon:a,trend:s,trendUp:n,chartData:i,chartColor:l="#8884d8"})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col justify-between h-40 relative overflow-hidden group hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start z-10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:r}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:t})]}),e.jsx("div",{className:"p-2 rounded-lg bg-gray-50 text-gray-600 group-hover:bg-purple-50 group-hover:text-purple-600 transition-colors",children:a})]}),e.jsx("div",{className:"flex justify-between items-end mt-4 z-10",children:s&&e.jsxs("div",{className:`flex items-center text-xs font-semibold ${n?"text-green-500":"text-red-500"}`,children:[n?"↑":"↓"," ",s,e.jsx("span",{className:"text-gray-400 ml-1 font-normal",children:"vs last month"})]})}),i&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 opacity-20",children:e.jsx(wt,{width:"100%",height:"100%",children:e.jsx(oa,{data:i,children:e.jsx(ca,{type:"monotone",dataKey:"value",stroke:l,fill:l,strokeWidth:2})})})})]}),Es=()=>{var n;const[r,t]=u.useState(null);u.useEffect(()=>{(async()=>{try{const l=await I.get("/dashboard/stats");t(l.data)}catch(l){console.error(l)}})()},[]);const a=((n=r==null?void 0:r.monthlyData)==null?void 0:n.map(i=>({name:`${new Date(0,i.month-1).toLocaleString("default",{month:"short"})}`,revenue:i.revenue})))||[];if(!r)return e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading dashboard data..."});const s=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(i);return e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard Overview"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Welcome back, here's what's happening today."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(ke,{title:"Total Songs",value:r.totalSongs,icon:e.jsx(Be,{size:20}),trend:"Total Songs",trendUp:!0,chartData:[],chartColor:"#8884d8"}),e.jsx(ke,{title:"Net Revenue",value:s(r.totalRevenue),icon:e.jsx(Le,{size:20}),trend:"Total Net Revenue",trendUp:!0,chartData:[],chartColor:"#82ca9d"}),e.jsx(ke,{title:"Sub Pub Share",value:s(r.totalSubPubShare),icon:e.jsx(Le,{size:20}),trend:"Total Share",trendUp:!0,chartData:[],chartColor:"#ffc658"}),e.jsx(ke,{title:"TBW Share",value:s(r.totalTBWShare),icon:e.jsx(as,{size:20}),trend:"Total Share",trendUp:!0,chartData:[],chartColor:"#ff8042"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:e.jsxs("div",{className:"lg:col-span-3 bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Monthly Revenue Analytics"})}),e.jsx("div",{className:"h-80",children:e.jsx(wt,{width:"100%",height:"100%",children:e.jsxs(oa,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#7A4A88",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#7A4A88",stopOpacity:0})]})}),e.jsx(da,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(ha,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12},dy:10}),e.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12},tickFormatter:i=>`Rp ${(i/1e6).toFixed(1)}M`}),e.jsx(xa,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},formatter:i=>s(i)}),e.jsx(ca,{type:"monotone",dataKey:"revenue",stroke:"#7A4A88",fillOpacity:1,fill:"url(#colorRevenue)",strokeWidth:3})]})})})]})})]})},zs=()=>{const{user:r}=Me(),[t,a]=u.useState([]),[s,n]=u.useState(!0),[i,l]=u.useState(""),[c,h]=u.useState(1),[m,d]=u.useState(20),[o,p]=u.useState(null),[w,S]=u.useState(!1),[v,j]=u.useState(""),[g,C]=u.useState(""),[b,R]=u.useState(""),[z,x]=u.useState(!1),y=u.useRef(null);u.useEffect(()=>{k()},[]);const k=async()=>{try{const _=await I.get("/songs");Array.isArray(_.data)?a(_.data):_.data&&_.data.data&&a(_.data.data)}catch(_){console.error(_),_.response&&_.response.status===401&&alert("Session expired. Please login again.")}finally{n(!1)}},E=async()=>{var _;try{const W=await I.get("/songs/export",{responseType:"blob"}),K=window.URL.createObjectURL(new Blob([W.data])),q=document.createElement("a");q.href=K,q.setAttribute("download","songs.xlsx"),document.body.appendChild(q),q.click(),(_=q.parentNode)==null||_.removeChild(q)}catch(W){console.error("Export failed",W),alert("Failed to export data")}},N=()=>{var _;(_=y.current)==null||_.click()},A=async _=>{var q,ce,pe,ve,Xe;const W=(q=_.target.files)==null?void 0:q[0];if(!W)return;const K=new FormData;K.append("file",W);try{const ie=await I.post("/songs/import",K,{headers:{"Content-Type":"multipart/form-data"}});alert(ie.data.message),ie.data.errors&&(console.warn("Import errors:",ie.data.errors),alert("Some rows failed to import. Check console for details.")),k()}catch(ie){console.error("Import failed",ie);const tt=((pe=(ce=ie.response)==null?void 0:ce.data)==null?void 0:pe.message)||ie.message||"Failed to import data",Re=((Xe=(ve=ie.response)==null?void 0:ve.data)==null?void 0:Xe.error)||"";alert(`${tt}
${Re}`)}finally{y.current&&(y.current.value="")}},T=async _=>{if(confirm("Are you sure you want to delete this song?"))try{await I.delete(`/songs/${_}`),k()}catch(W){console.error(W)}},M=_=>{p(_),j(_.status||"pending"),C(_.song_id||""),R(_.rejection_reason||""),S(!0)},B=async()=>{if(v==="accepted"&&!g.trim()){alert("Custom ID (Identitas Lagu) wajib diisi jika status Diterima.");return}if(v==="rejected"&&!b.trim()){alert("Alasan penolakan wajib diisi jika status Ditolak.");return}x(!0);try{await I.put(`/songs/${o.id}`,{status:v,song_id:g,rejection_reason:b}),S(!1),k()}catch(_){console.error(_),alert("Failed to update song status")}finally{x(!1)}},f=t.filter(_=>{var W;return _.title.toLowerCase().includes(i.toLowerCase())||((W=_.song_id)==null?void 0:W.toLowerCase().includes(i.toLowerCase()))}),L=Math.ceil(f.length/m),P=(c-1)*m,Y=f.slice(P,P+m);return s?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Data Lagu"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:E,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-sm",children:[e.jsx(Nt,{size:20,className:"mr-2"}),"Export Excel"]}),e.jsxs("button",{onClick:N,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(se,{size:20,className:"mr-2"}),"Import Excel"]}),e.jsx("input",{type:"file",ref:y,className:"hidden",accept:".xlsx, .xls",onChange:A}),e.jsxs(xe,{to:"/admin/songs/create",className:"glass-button flex items-center",children:[e.jsx(ra,{size:20,className:"mr-2"}),"Tambah Lagu"]})]})]}),e.jsxs("div",{className:"glass-panel",children:[e.jsxs("div",{className:"p-4 border-b border-white/30 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Search songs...",className:"glass-input pl-10 w-full",value:i,onChange:_=>{l(_.target.value),h(1)}}),e.jsx(re,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Show:"}),e.jsxs("select",{value:m,onChange:_=>{d(Number(_.target.value)),h(1)},className:"glass-input py-1 px-2 text-sm w-20",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200/50",children:[e.jsx("thead",{className:"bg-purple-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Song ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pencipta"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-transparent divide-y divide-gray-200/50",children:[Y.map((_,W)=>e.jsxs("tr",{className:W%2===0?"bg-white/50":"bg-white/30",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.song_id||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.performer||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-normal text-sm text-gray-500",children:_.writers&&_.writers.length>0?_.writers.map(K=>K.name).join(", "):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.user_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full uppercase
                        ${(_.status||"pending")==="accepted"?"bg-green-100 text-green-800":(_.status||"pending")==="review"?"bg-yellow-100 text-yellow-800":(_.status||"pending")==="rejected"?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"}`,children:_.status||"pending"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>M(_),className:"text-purple-600 hover:text-purple-900 p-1 rounded-md hover:bg-purple-50 transition-colors",title:"View Details",children:e.jsx(He,{size:18})}),e.jsx(xe,{to:`/admin/songs/edit/${_.id}`,className:"text-blue-600 hover:text-blue-900 p-1 rounded-md hover:bg-blue-50 transition-colors",title:"Edit",children:e.jsx(ot,{size:18})}),e.jsx("button",{onClick:()=>T(_.id),className:"text-red-600 hover:text-red-900 p-1 rounded-md hover:bg-red-50 transition-colors",title:"Delete",children:e.jsx(ia,{size:18})})]})})]},_.id)),Y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No songs found"})})]})]})}),L>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-white/30 flex items-center justify-between bg-white/20",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-medium",children:P+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(P+m,f.length)})," of ",e.jsx("span",{className:"font-medium",children:f.length})," results"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>h(_=>Math.max(_-1,1)),disabled:c===1,className:"px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,L)},(_,W)=>{let K=W+1;return L>5&&(c>3&&(K=c-2+W),K>L&&(K=L-(4-W))),e.jsx("button",{onClick:()=>h(K),className:`px-3 py-1 border rounded-md ${c===K?"bg-purple-600 text-white border-purple-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:K},K)}),e.jsx("button",{onClick:()=>h(_=>Math.min(_+1,L)),disabled:c===L,className:"px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),w&&o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Detail Lagu"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Judul Lagu"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:o.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Artis / Performer"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:o.performer||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"User Pengupload"}),e.jsx("p",{className:"text-gray-700",children:o.user_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status Saat Ini"}),e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full mt-1
                    ${(o.status||"pending")==="accepted"?"bg-green-100 text-green-800":(o.status||"pending")==="review"?"bg-yellow-100 text-yellow-800":(o.status||"pending")==="pending"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:o.status||"pending"})]}),o.status==="rejected"&&o.rejection_reason&&e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-red-50 p-3 rounded-lg border border-red-100 mt-2",children:[e.jsxs("label",{className:"text-xs font-semibold text-red-800 uppercase flex items-center mb-1",children:[e.jsx(Fe,{size:14,className:"mr-1"}),"Alasan Penolakan"]}),e.jsx("p",{className:"text-red-900 text-sm",children:o.rejection_reason})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Custom ID (Identitas)"}),e.jsx("p",{className:"text-gray-900 font-mono",children:o.song_id||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"ISWC / ISRC"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ISWC: ",o.iswc||"-"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ISRC: ",o.isrc||"-"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-bold text-gray-800 mb-3 border-b pb-2",children:"Writers / Pencipta"}),e.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Share (%)"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[o.writers&&o.writers.map((_,W)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:_.name}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:_.role||"-"}),e.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:[parseFloat(_.share_percent),"%"]})]},W)),(!o.writers||o.writers.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-4 py-2 text-sm text-gray-500 text-center",children:"No writers data"})})]})]})})]}),(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{className:"bg-purple-50 p-6 rounded-xl border border-purple-100 mt-6",children:[e.jsxs("div",{className:"mb-6 pb-6 border-b border-purple-200",children:[e.jsxs("h4",{className:"text-sm font-bold text-purple-800 mb-3 uppercase tracking-wide flex items-center",children:[e.jsx(ee,{size:16,className:"mr-2"}),"Generate Dokumen"]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>alert("Fitur Generate Kontrak akan segera hadir!"),className:"flex items-center px-3 py-2 bg-white text-purple-700 border border-purple-200 rounded-lg hover:bg-purple-100 hover:border-purple-300 transition-all text-sm font-medium shadow-sm",title:"Generate Kontrak",children:[e.jsx(ee,{size:16,className:"mr-2"}),"Generate Kontrak"]}),e.jsxs("button",{onClick:()=>alert("Fitur Generate SKP akan segera hadir!"),className:"flex items-center px-3 py-2 bg-white text-purple-700 border border-purple-200 rounded-lg hover:bg-purple-100 hover:border-purple-300 transition-all text-sm font-medium shadow-sm",title:"Generate SKP",children:[e.jsx(ss,{size:16,className:"mr-2"}),"Generate SKP"]}),e.jsxs("button",{onClick:()=>alert("Fitur Generate IPL akan segera hadir!"),className:"flex items-center px-3 py-2 bg-white text-purple-700 border border-purple-200 rounded-lg hover:bg-purple-100 hover:border-purple-300 transition-all text-sm font-medium shadow-sm",title:"Generate IPL",children:[e.jsx(rs,{size:16,className:"mr-2"}),"Generate IPL"]})]})]}),e.jsxs("h3",{className:"text-md font-bold text-purple-800 mb-4 flex items-center",children:[e.jsx(ot,{size:18,className:"mr-2"}),"Update Status (Admin/Operator)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:v,onChange:_=>j(_.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-2.5 border",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"accepted",children:"Diterima (Accepted)"}),e.jsx("option",{value:"rejected",children:"Ditolak (Rejected)"})]})]}),v==="accepted"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Custom ID ",e.jsx("span",{className:"text-red-500 ml-1",children:"*Required"})]}),e.jsx("input",{type:"text",value:g,onChange:_=>C(_.target.value),placeholder:"Masukkan Custom ID Lagu",className:`w-full rounded-lg shadow-sm p-2.5 border ${g?"border-gray-300 focus:border-purple-500 focus:ring-purple-500":"border-red-300 focus:border-red-500 focus:ring-red-500 bg-red-50"}`}),!g&&e.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(Fe,{size:12,className:"mr-1"}),"Wajib diisi saat status Diterima"]})]}),v==="rejected"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Alasan Penolakan ",e.jsx("span",{className:"text-red-500 ml-1",children:"*Required"})]}),e.jsx("textarea",{value:b,onChange:_=>R(_.target.value),placeholder:"Masukkan alasan penolakan...",rows:1,className:`w-full rounded-lg shadow-sm p-2.5 border ${b?"border-gray-300 focus:border-purple-500 focus:ring-purple-500":"border-red-300 focus:border-red-500 focus:ring-red-500 bg-red-50"}`}),!b&&e.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(Fe,{size:12,className:"mr-1"}),"Wajib diisi saat status Ditolak"]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{onClick:B,disabled:z||v==="accepted"&&!g||v==="rejected"&&!b,className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Qe,{size:18,className:"mr-2"}),z?"Saving...":"Simpan Perubahan"]})})]})]})]})})]})},Is=["Pop","Rock","Jazz","Blues","Hip Hop","R&B","Country","Folk","Classical","Electronic","Reggae","Soul","Funk","Disco","Techno","House","Trance","Dubstep","Metal","Punk","Indie","Alternative","Gospel","Latin","K-Pop","J-Pop","Dangdut","Keroncong","Campursari"].sort(),Os=["Indonesia","Malaysia","Singapore","Thailand","Vietnam","Philippines","United States","United Kingdom","Australia","Japan","South Korea","China","India","Canada","Germany","France","Italy","Spain","Netherlands","Brazil","Argentina","Mexico"].sort(),It=()=>{const r=Te(),{id:t}=vt(),[a,s]=u.useState(""),[n,i]=u.useState(""),[l,c]=u.useState(""),[h,m]=u.useState(""),[d,o]=u.useState(""),[p,w]=u.useState(""),[S,v]=u.useState(""),[j,g]=u.useState(""),[C,b]=u.useState(""),[R,z]=u.useState(""),[x,y]=u.useState(""),[k,E]=u.useState(null),[N]=u.useState({synchronization:!0,mechanical:!0,performing:!0,print_right:!0}),[A,T]=u.useState([{name:"",role:"Author & Composer",share_percent:0}]),[M,B]=u.useState([]),[f,L]=u.useState(!1),[P,Y]=u.useState([]),[_,W]=u.useState(!1),[K,q]=u.useState(null),[ce,pe]=u.useState("");u.useEffect(()=>{Xe(),t&&ve(t)},[t]);const ve=async D=>{try{const $=(await I.get(`/songs/${D}`)).data;s($.title),i($.other_title||""),c($.performer);const oe=parseInt($.duration);if(m(Math.floor(oe/60).toString()),o((oe%60).toString()),w($.genre),v($.language),g($.region),b($.iswc||""),z($.isrc||""),y($.note||""),$.writers&&$.writers.length>0&&T($.writers.map(ue=>({name:ue.name,role:ue.role||"Author & Composer",share_percent:parseFloat(ue.share_percent)}))),$.authorized_rights)try{typeof $.authorized_rights=="string"&&JSON.parse($.authorized_rights)}catch(ue){console.error("Failed to parse rights",ue)}}catch(F){console.error("Failed to fetch song",F),alert("Failed to fetch song details")}},Xe=async()=>{try{const D=await I.get("/creators");Array.isArray(D.data)?B(D.data):D.data&&D.data.data&&B(D.data.data)}catch(D){console.error("Failed to fetch creators",D)}},ie=()=>{T([...A,{name:"",role:"Author & Composer",share_percent:0}])},tt=D=>{const F=A.filter(($,oe)=>oe!==D);T(F)},Re=(D,F,$)=>{const oe=[...A];oe[D]={...oe[D],[F]:$},T(oe)},za=D=>{q(D),pe(""),W(!0)},Ia=D=>{K!==null&&(Re(K,"name",D.name),W(!1),q(null))},At=M.filter(D=>D.name.toLowerCase().includes(ce.toLowerCase())),Oa=A.reduce((D,F)=>D+Number(F.share_percent||0),0),Ua=async D=>{var Pt,Lt;D.preventDefault();const F=[];a.trim()||F.push("Judul Lagu"),l.trim()||F.push("Artis / Performer"),p||F.push("Genre"),S||F.push("Bahasa/Negara"),j||F.push("Region"),!h&&!d&&F.push("Durasi");const $=A.reduce((Ne,Fa)=>Ne+Number(Fa.share_percent||0),0);if($!==100&&F.push(`Total Share Penulis (Saat ini: ${$}%, Wajib: 100%)`),A.some(Ne=>!Ne.name.trim())&&F.push("Nama Penulis (Semua baris penulis wajib diisi)"),F.length>0){Y(F),L(!0);return}const ue=parseInt(h||"0")*60+parseInt(d||"0"),Ba=JSON.stringify(N),J=new FormData;J.append("title",a),J.append("other_title",n),J.append("performer",l),J.append("duration",ue.toString()),J.append("genre",p),J.append("language",S),J.append("region",j),J.append("iswc",C),J.append("isrc",R),J.append("note",x),J.append("authorized_rights",Ba),J.append("writers",JSON.stringify(A)),k&&J.append("lyrics",k);try{t?await I.put(`/songs/${t}`,J,{headers:{"Content-Type":"multipart/form-data"}}):await I.post("/songs",J,{headers:{"Content-Type":"multipart/form-data"}}),r("/admin/songs")}catch(Ne){console.error(Ne),alert(((Lt=(Pt=Ne.response)==null?void 0:Pt.data)==null?void 0:Lt.message)||"Failed to create song")}};return e.jsxs("div",{className:"bg-white/60 backdrop-blur-md rounded-lg shadow-xl border border-white/40 min-h-[calc(100vh-2rem)]",children:[e.jsx("div",{className:"border-b border-white/30 px-6 py-4 flex items-center justify-between",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:t?"Edit Song":"Add New Song"})}),_&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"bg-purple-50 px-6 py-4 border-b border-purple-100 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-800 flex items-center",children:[e.jsx(_e,{className:"mr-2",size:20}),"Pilih Pencipta (Writer)"]}),e.jsx("button",{onClick:()=>W(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ye,{size:20})})]}),e.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Cari nama pencipta...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",value:ce,onChange:D=>pe(D.target.value),autoFocus:!0})]})}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto p-2",children:At.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-1",children:At.map(D=>e.jsxs("button",{onClick:()=>Ia(D),className:"flex items-center w-full px-4 py-3 text-left hover:bg-purple-50 rounded-lg transition-colors group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-bold mr-3 group-hover:bg-purple-200",children:D.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:D.name}),e.jsx("p",{className:"text-xs text-gray-500",children:D.role||"Writer"})]})]},D.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Tidak ada pencipta ditemukan."})})})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"bg-red-50 px-6 py-4 border-b border-red-100 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-red-800 flex items-center",children:[e.jsx(is,{className:"mr-2",size:20}),"Data Belum Lengkap"]}),e.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Mohon lengkapi data berikut sebelum menyimpan:"}),e.jsx("ul",{className:"space-y-2",children:P.map((D,F)=>e.jsxs("li",{className:"flex items-start text-sm text-red-600 bg-red-50 p-2 rounded border border-red-100",children:[e.jsx("span",{className:"mr-2",children:"•"}),D]},F))})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end",children:e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium",children:"Saya Mengerti"})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:Ua,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"glass-input",value:a,onChange:D=>s(D.target.value.toUpperCase()),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other title"}),e.jsx("input",{type:"text",className:"glass-input",value:n,onChange:D=>i(D.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authorized Rights"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"rounded text-[#7A4A88] focus:ring-[#7A4A88]"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Synchronization"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"rounded text-[#7A4A88] focus:ring-[#7A4A88]"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Mechanical"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"rounded text-[#7A4A88] focus:ring-[#7A4A88]"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Performing"})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"rounded text-[#7A4A88] focus:ring-[#7A4A88]"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Print right"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Performer ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"glass-input",value:l,onChange:D=>c(D.target.value.toUpperCase()),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"number",placeholder:"Min",className:"glass-input pr-8",value:h,onChange:D=>m(D.target.value),min:"0",required:!0}),e.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400 text-xs",children:"m"})]}),e.jsx("span",{className:"text-gray-400",children:":"}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"number",placeholder:"Sec",className:"glass-input pr-8",value:d,onChange:D=>o(D.target.value),min:"0",max:"59",required:!0}),e.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400 text-xs",children:"s"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Genre ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"glass-input",value:p,onChange:D=>w(D.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Genre"}),Is.map(D=>e.jsx("option",{value:D,children:D},D))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Language ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"glass-input",value:S,onChange:D=>v(D.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Country/Language"}),Os.map(D=>e.jsx("option",{value:D,children:D},D))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Region ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"glass-input",value:j,onChange:D=>g(D.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Region"}),e.jsx("option",{value:"Global",children:"Global"}),e.jsx("option",{value:"Asia",children:"Asia"}),e.jsx("option",{value:"Europe",children:"Europe"}),e.jsx("option",{value:"America",children:"America"}),e.jsx("option",{value:"Oceania",children:"Oceania"}),e.jsx("option",{value:"Africa",children:"Africa"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ISWC"}),e.jsx("input",{type:"text",className:"glass-input",value:C,onChange:D=>b(D.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ISRC"}),e.jsx("input",{type:"text",className:"glass-input",value:R,onChange:D=>z(D.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note"}),e.jsx("textarea",{className:"glass-input",rows:4,value:x,onChange:D=>y(D.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lyrics & Chord (Doc, Docx, PDF, TXT)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 flex flex-col items-center justify-center bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer relative",children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:D=>{D.target.files&&D.target.files[0]&&E(D.target.files[0])},accept:".doc,.docx,.pdf,.txt"}),e.jsx("div",{className:"text-center",children:k?e.jsx("div",{className:"flex items-center text-purple-600",children:e.jsx("span",{className:"font-medium",children:k.name})}):e.jsxs("div",{className:"text-gray-500",children:[e.jsx("p",{className:"font-medium",children:"Click or drag file to upload"}),e.jsx("p",{className:"text-xs mt-1",children:"Supported formats: .doc, .docx, .pdf, .txt"})]})})]})]}),e.jsx("div",{className:"border border-white/40 rounded-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-purple-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/2",children:"Writer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Share"}),e.jsx("th",{className:"px-6 py-3 text-right"})]})}),e.jsxs("tbody",{className:"bg-transparent divide-y divide-gray-200/50",children:[A.map((D,F)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{onClick:()=>za(F),className:"cursor-pointer relative",children:[e.jsx("input",{type:"text",placeholder:"Select Writer",className:"glass-input px-4 py-3 text-base w-full cursor-pointer bg-white/50 hover:bg-white/80 transition-colors",value:D.name,readOnly:!0,required:!0}),e.jsx(re,{size:16,className:"absolute right-3 top-3.5 text-gray-400"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{className:"glass-input px-4 py-3 text-base w-full",value:D.role,onChange:$=>Re(F,"role",$.target.value),children:[e.jsx("option",{value:"Author & Composer",children:"Author & Composer"}),e.jsx("option",{value:"Author",children:"Author"}),e.jsx("option",{value:"Composer",children:"Composer"}),e.jsx("option",{value:"Arranger",children:"Arranger"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"glass-input w-20 px-3 py-3 text-base text-right",value:D.share_percent,onChange:$=>Re(F,"share_percent",parseFloat($.target.value)||0)}),e.jsx("span",{className:"ml-2 text-base text-gray-500",children:"%"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:A.length>1&&e.jsx("button",{type:"button",onClick:()=>tt(F),className:"text-red-400 hover:text-red-600 transition-colors",children:e.jsx(na,{size:18})})})]},F)),e.jsxs("tr",{className:"bg-purple-50/50 font-semibold",children:[e.jsx("td",{colSpan:2,className:"px-6 py-3 text-right",children:"Share Total"}),e.jsxs("td",{className:"px-6 py-3 text-right pr-12 text-[#7A4A88]",children:[Oa,"%"]}),e.jsx("td",{})]})]})]})}),e.jsx("datalist",{id:"creators-list",children:M.map(D=>e.jsx("option",{value:D.name},D.id))}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:ie,className:"glass-button bg-gray-500/50 hover:bg-gray-600/50 text-white text-sm",children:"+ Add Other Writer"})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"submit",className:"glass-button",children:"Save"})})]})})]})},Us=({isOpen:r,onClose:t,creator:a})=>{const[s,n]=u.useState([]),[i,l]=u.useState(!1),[c,h]=u.useState(""),[m,d]=u.useState(1),o=10;u.useEffect(()=>{r&&a?(p(),h(""),d(1)):n([])},[r,a]);const p=async()=>{l(!0);try{const g=await I.get(`/songs?writer_name=${encodeURIComponent(a.name)}`);n(g.data)}catch(g){console.error("Failed to fetch songs",g)}finally{l(!1)}},w=s.filter(g=>g.title.toLowerCase().includes(c.toLowerCase())||g.performer&&g.performer.toLowerCase().includes(c.toLowerCase())),S=Math.ceil(w.length/o),v=(m-1)*o,j=w.slice(v,v+o);return!r||!a?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Detail Data Pencipta"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-red-500",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4 border-b pb-2",children:"Informasi Pribadi"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Nama"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.name]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"NIK"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.nik||"-"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Tgl Lahir"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.birth_date?new Date(a.birth_date).toLocaleDateString("id-ID"):"-"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Tempat Lahir"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.birth_place||"-"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Alamat"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.address||"-"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Agama"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.religion||"-"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Pekerjaan"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.occupation||"-"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Kewarganegaraan"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.nationality||"-"]})]})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mt-6 mb-4 border-b pb-2",children:"Informasi Bank"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Nama Bank"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.bank_name||"-"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"No. Rekening"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.bank_account_number||"-"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Nama Pemilik"}),e.jsxs("span",{className:"col-span-2 text-gray-900",children:[": ",a.bank_account_name||"-"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-4 border-b pb-2",children:"Dokumen"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-600",children:"KTP"}),a.ktp_path?e.jsx("div",{className:"border rounded-lg overflow-hidden bg-gray-50",children:e.jsx("img",{src:`http://localhost:5000/${a.ktp_path}`,alt:"KTP",className:"w-full h-auto object-contain max-h-64"})}):e.jsx("div",{className:"h-32 bg-gray-100 rounded-lg flex items-center justify-center text-gray-400 text-sm",children:"Tidak ada gambar KTP"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-600",children:"NPWP"}),a.npwp_path?e.jsx("div",{className:"border rounded-lg overflow-hidden bg-gray-50",children:e.jsx("img",{src:`http://localhost:5000/${a.npwp_path}`,alt:"NPWP",className:"w-full h-auto object-contain max-h-64"})}):e.jsx("div",{className:"h-32 bg-gray-100 rounded-lg flex items-center justify-center text-gray-400 text-sm",children:"Tidak ada gambar NPWP"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-700",children:["Daftar Lagu (",s.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Cari lagu...",className:"pl-8 pr-3 py-1.5 text-sm border rounded-md focus:ring-purple-500 focus:border-purple-500",value:c,onChange:g=>{h(g.target.value),d(1)}}),e.jsx(re,{className:"absolute left-2.5 top-2 text-gray-400",size:14})]})]}),i?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Memuat lagu..."}):w.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto border rounded-lg mb-3",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Judul"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Artis"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Genre"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(g=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:g.title}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:g.performer}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:g.genre}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold uppercase
                                                ${g.status==="accepted"?"bg-green-100 text-green-800":g.status==="rejected"?"bg-red-100 text-red-800":g.status==="review"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:g.status||"Pending"})})]},g.id))})]})}),S>1&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("div",{className:"text-gray-500",children:["Showing ",v+1," to ",Math.min(v+o,w.length)," of ",w.length," entries"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>d(g=>Math.max(g-1,1)),disabled:m===1,className:"px-3 py-1 border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:S},(g,C)=>C+1).map(g=>e.jsx("button",{onClick:()=>d(g),className:`px-3 py-1 border rounded ${m===g?"bg-purple-600 text-white border-purple-600":"hover:bg-gray-50"}`,children:g},g)),e.jsx("button",{onClick:()=>d(g=>Math.min(g+1,S)),disabled:m===S,className:"px-3 py-1 border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500 bg-gray-50 rounded-lg border border-dashed",children:s.length>0?"Tidak ada lagu yang cocok dengan pencarian.":"Tidak ada lagu yang ditemukan untuk pencipta ini."})]})]}),e.jsx("div",{className:"p-6 border-t bg-gray-50 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-medium",children:"Tutup"})})]})})},Bs=()=>{const[r,t]=u.useState([]),[a,s]=u.useState(""),[n,i]=u.useState(null),[l,c]=u.useState(!1),h=u.useRef(null);u.useEffect(()=>{m()},[]);const m=async()=>{try{const j=await I.get("/creators");Array.isArray(j.data)?t(j.data):j.data&&j.data.data&&t(j.data.data)}catch(j){console.error(j),j.response&&j.response.status===401&&alert("Session expired. Please login again.")}},d=async()=>{var j;try{const g=await I.get("/creators/export",{responseType:"blob"}),C=window.URL.createObjectURL(new Blob([g.data])),b=document.createElement("a");b.href=C,b.setAttribute("download","creators.xlsx"),document.body.appendChild(b),b.click(),(j=b.parentNode)==null||j.removeChild(b)}catch(g){console.error("Export failed",g),alert("Failed to export data")}},o=()=>{var j;(j=h.current)==null||j.click()},p=async j=>{var b;const g=(b=j.target.files)==null?void 0:b[0];if(!g)return;const C=new FormData;C.append("file",g);try{const R=await I.post("/creators/import",C,{headers:{"Content-Type":"multipart/form-data"}});alert(R.data.message),R.data.errors&&(console.warn("Import errors:",R.data.errors),alert("Some rows failed to import. Check console for details.")),m()}catch(R){console.error("Import failed",R),alert("Failed to import data")}finally{h.current&&(h.current.value="")}},w=j=>{i(j),c(!0)},S=async j=>{if(confirm("Are you sure you want to delete this creator?"))try{await I.delete(`/creators/${j}`),m()}catch(g){console.error("Failed to delete creator",g),alert("Failed to delete creator")}},v=r.filter(j=>j.name.toLowerCase().includes(a.toLowerCase())||j.nik&&j.nik.includes(a));return e.jsxs("div",{children:[e.jsx(Us,{isOpen:l,onClose:()=>c(!1),creator:n}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Data Pencipta"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:d,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-sm",children:[e.jsx(Nt,{size:20,className:"mr-2"}),"Export Excel"]}),e.jsxs("button",{onClick:o,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(se,{size:20,className:"mr-2"}),"Import Excel"]}),e.jsx("input",{type:"file",ref:h,className:"hidden",accept:".xlsx, .xls",onChange:p}),e.jsxs(xe,{to:"/admin/creators/add",className:"glass-button flex items-center",children:[e.jsx(ra,{size:20,className:"mr-2"}),"Add Pencipta"]})]})]}),e.jsxs("div",{className:"glass-panel",children:[e.jsx("div",{className:"p-4 border-b border-white/30",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Cari nama atau NIK...",className:"glass-input pl-10",value:a,onChange:j=>s(j.target.value)}),e.jsx(re,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200/50",children:[e.jsx("thead",{className:"bg-purple-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Pemilik"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NIK"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tgl Lahir"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alamat"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-transparent divide-y divide-gray-200/50",children:[v.map((j,g)=>e.jsxs("tr",{className:g%2===0?"bg-white/50":"bg-white/30",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:j.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.user_name?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:j.user_name}):e.jsx("span",{className:"text-gray-400 italic",children:"Unassigned"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.nik||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.birth_date?new Date(j.birth_date).toLocaleDateString("en-GB"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-normal text-sm text-gray-500",children:j.address||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>w(j),className:"text-purple-600 hover:text-purple-900 p-1 rounded-md hover:bg-purple-50 transition-colors",title:"Lihat Data",children:e.jsx(He,{size:18})}),e.jsx(xe,{to:`/admin/creators/edit/${j.id}`,className:"text-blue-600 hover:text-blue-900 p-1 rounded-md hover:bg-blue-50 transition-colors",title:"Edit Data",children:e.jsx(ot,{size:18})}),e.jsx("button",{onClick:()=>S(j.id),className:"text-red-600 hover:text-red-900 p-1 rounded-md hover:bg-red-50 transition-colors",title:"Delete Data",children:e.jsx(ia,{size:18})})]})})]},j.id)),v.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No creators found"})})]})]})})]})]})};/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function Ot(r,t){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),a.push.apply(a,s)}return a}function ja(r){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ot(Object(a),!0).forEach(function(s){Ys(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Ot(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r}function Fs(r,t){if(typeof r!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function va(r){var t=Fs(r,"string");return typeof t=="symbol"?t:t+""}function ht(r){"@babel/helpers - typeof";return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(r)}function Ws(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(r,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,va(s.key),s)}}function $s(r,t,a){return t&&Ut(r.prototype,t),a&&Ut(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r}function Ys(r,t,a){return t=va(t),t in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a,r}function Na(r){return Hs(r)||Xs(r)||Ks(r)||Gs()}function Hs(r){if(Array.isArray(r))return mt(r)}function Xs(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Ks(r,t){if(r){if(typeof r=="string")return mt(r,t);var a=Object.prototype.toString.call(r).slice(8,-1);if(a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set")return Array.from(r);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return mt(r,t)}}function mt(r,t){(t==null||t>r.length)&&(t=r.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=r[a];return s}function Gs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var et=typeof window<"u"&&typeof window.document<"u",le=et?window:{},St=et&&le.document.documentElement?"ontouchstart"in le.document.documentElement:!1,kt=et?"PointerEvent"in le:!1,H="cropper",Ct="all",wa="crop",Sa="move",ka="zoom",ge="e",fe="w",we="s",de="n",Ee="ne",ze="nw",Ie="se",Oe="sw",xt="".concat(H,"-crop"),Bt="".concat(H,"-disabled"),Z="".concat(H,"-hidden"),Ft="".concat(H,"-hide"),Vs="".concat(H,"-invisible"),qe="".concat(H,"-modal"),pt="".concat(H,"-move"),$e="".concat(H,"Action"),Ke="".concat(H,"Preview"),Dt="crop",Ca="move",Da="none",ut="crop",gt="cropend",ft="cropmove",bt="cropstart",Wt="dblclick",qs=St?"touchstart":"mousedown",Js=St?"touchmove":"mousemove",Qs=St?"touchend touchcancel":"mouseup",$t=kt?"pointerdown":qs,Yt=kt?"pointermove":Js,Ht=kt?"pointerup pointercancel":Qs,Xt="ready",Kt="resize",Gt="wheel",yt="zoom",Vt="image/jpeg",Zs=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,er=/^data:/,tr=/^data:image\/jpeg;base64,/,ar=/^img|canvas$/i,_a=200,Aa=100,qt={viewMode:0,dragMode:Dt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:_a,minContainerHeight:Aa,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},sr='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',rr=Number.isNaN||le.isNaN;function O(r){return typeof r=="number"&&!rr(r)}var Jt=function(t){return t>0&&t<1/0};function rt(r){return typeof r>"u"}function je(r){return ht(r)==="object"&&r!==null}var ir=Object.prototype.hasOwnProperty;function Ce(r){if(!je(r))return!1;try{var t=r.constructor,a=t.prototype;return t&&a&&ir.call(a,"isPrototypeOf")}catch{return!1}}function Q(r){return typeof r=="function"}var nr=Array.prototype.slice;function Pa(r){return Array.from?Array.from(r):nr.call(r)}function G(r,t){return r&&Q(t)&&(Array.isArray(r)||O(r.length)?Pa(r).forEach(function(a,s){t.call(r,a,s,r)}):je(r)&&Object.keys(r).forEach(function(a){t.call(r,r[a],a,r)})),r}var X=Object.assign||function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];return je(t)&&s.length>0&&s.forEach(function(i){je(i)&&Object.keys(i).forEach(function(l){t[l]=i[l]})}),t},lr=/\.\d*(?:0|9){12}\d*$/;function Ae(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return lr.test(r)?Math.round(r*t)/t:r}var or=/^width|height|left|top|marginLeft|marginTop$/;function he(r,t){var a=r.style;G(t,function(s,n){or.test(n)&&O(s)&&(s="".concat(s,"px")),a[n]=s})}function cr(r,t){return r.classList?r.classList.contains(t):r.className.indexOf(t)>-1}function V(r,t){if(t){if(O(r.length)){G(r,function(s){V(s,t)});return}if(r.classList){r.classList.add(t);return}var a=r.className.trim();a?a.indexOf(t)<0&&(r.className="".concat(a," ").concat(t)):r.className=t}}function ne(r,t){if(t){if(O(r.length)){G(r,function(a){ne(a,t)});return}if(r.classList){r.classList.remove(t);return}r.className.indexOf(t)>=0&&(r.className=r.className.replace(t,""))}}function De(r,t,a){if(t){if(O(r.length)){G(r,function(s){De(s,t,a)});return}a?V(r,t):ne(r,t)}}var dr=/([a-z\d])([A-Z])/g;function _t(r){return r.replace(dr,"$1-$2").toLowerCase()}function jt(r,t){return je(r[t])?r[t]:r.dataset?r.dataset[t]:r.getAttribute("data-".concat(_t(t)))}function Ye(r,t,a){je(a)?r[t]=a:r.dataset?r.dataset[t]=a:r.setAttribute("data-".concat(_t(t)),a)}function hr(r,t){if(je(r[t]))try{delete r[t]}catch{r[t]=void 0}else if(r.dataset)try{delete r.dataset[t]}catch{r.dataset[t]=void 0}else r.removeAttribute("data-".concat(_t(t)))}var La=/\s\s*/,Ta=function(){var r=!1;if(et){var t=!1,a=function(){},s=Object.defineProperty({},"once",{get:function(){return r=!0,t},set:function(i){t=i}});le.addEventListener("test",a,s),le.removeEventListener("test",a,s)}return r}();function ae(r,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=a;t.trim().split(La).forEach(function(i){if(!Ta){var l=r.listeners;l&&l[i]&&l[i][a]&&(n=l[i][a],delete l[i][a],Object.keys(l[i]).length===0&&delete l[i],Object.keys(l).length===0&&delete r.listeners)}r.removeEventListener(i,n,s)})}function te(r,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=a;t.trim().split(La).forEach(function(i){if(s.once&&!Ta){var l=r.listeners,c=l===void 0?{}:l;n=function(){delete c[i][a],r.removeEventListener(i,n,s);for(var m=arguments.length,d=new Array(m),o=0;o<m;o++)d[o]=arguments[o];a.apply(r,d)},c[i]||(c[i]={}),c[i][a]&&r.removeEventListener(i,c[i][a],s),c[i][a]=n,r.listeners=c}r.addEventListener(i,n,s)})}function Pe(r,t,a){var s;return Q(Event)&&Q(CustomEvent)?s=new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent"),s.initCustomEvent(t,!0,!0,a)),r.dispatchEvent(s)}function Ma(r){var t=r.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var it=le.location,mr=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Qt(r){var t=r.match(mr);return t!==null&&(t[1]!==it.protocol||t[2]!==it.hostname||t[3]!==it.port)}function Zt(r){var t="timestamp=".concat(new Date().getTime());return r+(r.indexOf("?")===-1?"?":"&")+t}function We(r){var t=r.rotate,a=r.scaleX,s=r.scaleY,n=r.translateX,i=r.translateY,l=[];O(n)&&n!==0&&l.push("translateX(".concat(n,"px)")),O(i)&&i!==0&&l.push("translateY(".concat(i,"px)")),O(t)&&t!==0&&l.push("rotate(".concat(t,"deg)")),O(a)&&a!==1&&l.push("scaleX(".concat(a,")")),O(s)&&s!==1&&l.push("scaleY(".concat(s,")"));var c=l.length?l.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function xr(r){var t=ja({},r),a=0;return G(r,function(s,n){delete t[n],G(t,function(i){var l=Math.abs(s.startX-i.startX),c=Math.abs(s.startY-i.startY),h=Math.abs(s.endX-i.endX),m=Math.abs(s.endY-i.endY),d=Math.sqrt(l*l+c*c),o=Math.sqrt(h*h+m*m),p=(o-d)/d;Math.abs(p)>Math.abs(a)&&(a=p)})}),a}function Ge(r,t){var a=r.pageX,s=r.pageY,n={endX:a,endY:s};return t?n:ja({startX:a,startY:s},n)}function pr(r){var t=0,a=0,s=0;return G(r,function(n){var i=n.startX,l=n.startY;t+=i,a+=l,s+=1}),t/=s,a/=s,{pageX:t,pageY:a}}function me(r){var t=r.aspectRatio,a=r.height,s=r.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",i=Jt(s),l=Jt(a);if(i&&l){var c=a*t;n==="contain"&&c>s||n==="cover"&&c<s?a=s/t:s=a*t}else i?a=s/t:l&&(s=a*t);return{width:s,height:a}}function ur(r){var t=r.width,a=r.height,s=r.degree;if(s=Math.abs(s)%180,s===90)return{width:a,height:t};var n=s%90*Math.PI/180,i=Math.sin(n),l=Math.cos(n),c=t*l+a*i,h=t*i+a*l;return s>90?{width:h,height:c}:{width:c,height:h}}function gr(r,t,a,s){var n=t.aspectRatio,i=t.naturalWidth,l=t.naturalHeight,c=t.rotate,h=c===void 0?0:c,m=t.scaleX,d=m===void 0?1:m,o=t.scaleY,p=o===void 0?1:o,w=a.aspectRatio,S=a.naturalWidth,v=a.naturalHeight,j=s.fillColor,g=j===void 0?"transparent":j,C=s.imageSmoothingEnabled,b=C===void 0?!0:C,R=s.imageSmoothingQuality,z=R===void 0?"low":R,x=s.maxWidth,y=x===void 0?1/0:x,k=s.maxHeight,E=k===void 0?1/0:k,N=s.minWidth,A=N===void 0?0:N,T=s.minHeight,M=T===void 0?0:T,B=document.createElement("canvas"),f=B.getContext("2d"),L=me({aspectRatio:w,width:y,height:E}),P=me({aspectRatio:w,width:A,height:M},"cover"),Y=Math.min(L.width,Math.max(P.width,S)),_=Math.min(L.height,Math.max(P.height,v)),W=me({aspectRatio:n,width:y,height:E}),K=me({aspectRatio:n,width:A,height:M},"cover"),q=Math.min(W.width,Math.max(K.width,i)),ce=Math.min(W.height,Math.max(K.height,l)),pe=[-q/2,-ce/2,q,ce];return B.width=Ae(Y),B.height=Ae(_),f.fillStyle=g,f.fillRect(0,0,Y,_),f.save(),f.translate(Y/2,_/2),f.rotate(h*Math.PI/180),f.scale(d,p),f.imageSmoothingEnabled=b,f.imageSmoothingQuality=z,f.drawImage.apply(f,[r].concat(Na(pe.map(function(ve){return Math.floor(Ae(ve))})))),f.restore(),B}var Ra=String.fromCharCode;function fr(r,t,a){var s="";a+=t;for(var n=t;n<a;n+=1)s+=Ra(r.getUint8(n));return s}var br=/^data:.*,/;function yr(r){var t=r.replace(br,""),a=atob(t),s=new ArrayBuffer(a.length),n=new Uint8Array(s);return G(n,function(i,l){n[l]=a.charCodeAt(l)}),s}function jr(r,t){for(var a=[],s=8192,n=new Uint8Array(r);n.length>0;)a.push(Ra.apply(null,Pa(n.subarray(0,s)))),n=n.subarray(s);return"data:".concat(t,";base64,").concat(btoa(a.join("")))}function vr(r){var t=new DataView(r),a;try{var s,n,i;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var l=t.byteLength,c=2;c+1<l;){if(t.getUint8(c)===255&&t.getUint8(c+1)===225){n=c;break}c+=1}if(n){var h=n+4,m=n+10;if(fr(t,h,4)==="Exif"){var d=t.getUint16(m);if(s=d===18761,(s||d===19789)&&t.getUint16(m+2,s)===42){var o=t.getUint32(m+4,s);o>=8&&(i=m+o)}}}if(i){var p=t.getUint16(i,s),w,S;for(S=0;S<p;S+=1)if(w=i+S*12+2,t.getUint16(w,s)===274){w+=8,a=t.getUint16(w,s),t.setUint16(w,1,s);break}}}catch{a=1}return a}function Nr(r){var t=0,a=1,s=1;switch(r){case 2:a=-1;break;case 3:t=-180;break;case 4:s=-1;break;case 5:t=90,s=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:s}}var wr={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,a=this.options,s=this.container,n=this.cropper,i=Number(a.minContainerWidth),l=Number(a.minContainerHeight);V(n,Z),ne(t,Z);var c={width:Math.max(s.offsetWidth,i>=0?i:_a),height:Math.max(s.offsetHeight,l>=0?l:Aa)};this.containerData=c,he(n,{width:c.width,height:c.height}),V(t,Z),ne(n,Z)},initCanvas:function(){var t=this.containerData,a=this.imageData,s=this.options.viewMode,n=Math.abs(a.rotate)%180===90,i=n?a.naturalHeight:a.naturalWidth,l=n?a.naturalWidth:a.naturalHeight,c=i/l,h=t.width,m=t.height;t.height*c>t.width?s===3?h=t.height*c:m=t.width/c:s===3?m=t.width/c:h=t.height*c;var d={aspectRatio:c,naturalWidth:i,naturalHeight:l,width:h,height:m};this.canvasData=d,this.limited=s===1||s===2,this.limitCanvas(!0,!0),d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth),d.height=Math.min(Math.max(d.height,d.minHeight),d.maxHeight),d.left=(t.width-d.width)/2,d.top=(t.height-d.height)/2,d.oldLeft=d.left,d.oldTop=d.top,this.initialCanvasData=X({},d)},limitCanvas:function(t,a){var s=this.options,n=this.containerData,i=this.canvasData,l=this.cropBoxData,c=s.viewMode,h=i.aspectRatio,m=this.cropped&&l;if(t){var d=Number(s.minCanvasWidth)||0,o=Number(s.minCanvasHeight)||0;c>1?(d=Math.max(d,n.width),o=Math.max(o,n.height),c===3&&(o*h>d?d=o*h:o=d/h)):c>0&&(d?d=Math.max(d,m?l.width:0):o?o=Math.max(o,m?l.height:0):m&&(d=l.width,o=l.height,o*h>d?d=o*h:o=d/h));var p=me({aspectRatio:h,width:d,height:o});d=p.width,o=p.height,i.minWidth=d,i.minHeight=o,i.maxWidth=1/0,i.maxHeight=1/0}if(a)if(c>(m?0:1)){var w=n.width-i.width,S=n.height-i.height;i.minLeft=Math.min(0,w),i.minTop=Math.min(0,S),i.maxLeft=Math.max(0,w),i.maxTop=Math.max(0,S),m&&this.limited&&(i.minLeft=Math.min(l.left,l.left+(l.width-i.width)),i.minTop=Math.min(l.top,l.top+(l.height-i.height)),i.maxLeft=l.left,i.maxTop=l.top,c===2&&(i.width>=n.width&&(i.minLeft=Math.min(0,w),i.maxLeft=Math.max(0,w)),i.height>=n.height&&(i.minTop=Math.min(0,S),i.maxTop=Math.max(0,S))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=n.width,i.maxTop=n.height},renderCanvas:function(t,a){var s=this.canvasData,n=this.imageData;if(a){var i=ur({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),l=i.width,c=i.height,h=s.width*(l/s.naturalWidth),m=s.height*(c/s.naturalHeight);s.left-=(h-s.width)/2,s.top-=(m-s.height)/2,s.width=h,s.height=m,s.aspectRatio=l/c,s.naturalWidth=l,s.naturalHeight=c,this.limitCanvas(!0,!1)}(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,he(this.canvas,X({width:s.width,height:s.height},We({translateX:s.left,translateY:s.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var a=this.canvasData,s=this.imageData,n=s.naturalWidth*(a.width/a.naturalWidth),i=s.naturalHeight*(a.height/a.naturalHeight);X(s,{width:n,height:i,left:(a.width-n)/2,top:(a.height-i)/2}),he(this.image,X({width:s.width,height:s.height},We(X({translateX:s.left,translateY:s.top},s)))),t&&this.output()},initCropBox:function(){var t=this.options,a=this.canvasData,s=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,i={width:a.width,height:a.height};s&&(a.height*s>a.width?i.height=i.width/s:i.width=i.height*s),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*n),i.height=Math.max(i.minHeight,i.height*n),i.left=a.left+(a.width-i.width)/2,i.top=a.top+(a.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=X({},i)},limitCropBox:function(t,a){var s=this.options,n=this.containerData,i=this.canvasData,l=this.cropBoxData,c=this.limited,h=s.aspectRatio;if(t){var m=Number(s.minCropBoxWidth)||0,d=Number(s.minCropBoxHeight)||0,o=c?Math.min(n.width,i.width,i.width+i.left,n.width-i.left):n.width,p=c?Math.min(n.height,i.height,i.height+i.top,n.height-i.top):n.height;m=Math.min(m,n.width),d=Math.min(d,n.height),h&&(m&&d?d*h>m?d=m/h:m=d*h:m?d=m/h:d&&(m=d*h),p*h>o?p=o/h:o=p*h),l.minWidth=Math.min(m,o),l.minHeight=Math.min(d,p),l.maxWidth=o,l.maxHeight=p}a&&(c?(l.minLeft=Math.max(0,i.left),l.minTop=Math.max(0,i.top),l.maxLeft=Math.min(n.width,i.left+i.width)-l.width,l.maxTop=Math.min(n.height,i.top+i.height)-l.height):(l.minLeft=0,l.minTop=0,l.maxLeft=n.width-l.width,l.maxTop=n.height-l.height))},renderCropBox:function(){var t=this.options,a=this.containerData,s=this.cropBoxData;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,t.movable&&t.cropBoxMovable&&Ye(this.face,$e,s.width>=a.width&&s.height>=a.height?Sa:Ct),he(this.cropBox,X({width:s.width,height:s.height},We({translateX:s.left,translateY:s.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Pe(this.element,ut,this.getData())}},Sr={initPreview:function(){var t=this.element,a=this.crossOrigin,s=this.options.preview,n=a?this.crossOriginUrl:this.url,i=t.alt||"The image to preview",l=document.createElement("img");if(a&&(l.crossOrigin=a),l.src=n,l.alt=i,this.viewBox.appendChild(l),this.viewBoxImage=l,!!s){var c=s;typeof s=="string"?c=t.ownerDocument.querySelectorAll(s):s.querySelector&&(c=[s]),this.previews=c,G(c,function(h){var m=document.createElement("img");Ye(h,Ke,{width:h.offsetWidth,height:h.offsetHeight,html:h.innerHTML}),a&&(m.crossOrigin=a),m.src=n,m.alt=i,m.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',h.innerHTML="",h.appendChild(m)})}},resetPreview:function(){G(this.previews,function(t){var a=jt(t,Ke);he(t,{width:a.width,height:a.height}),t.innerHTML=a.html,hr(t,Ke)})},preview:function(){var t=this.imageData,a=this.canvasData,s=this.cropBoxData,n=s.width,i=s.height,l=t.width,c=t.height,h=s.left-a.left-t.left,m=s.top-a.top-t.top;!this.cropped||this.disabled||(he(this.viewBoxImage,X({width:l,height:c},We(X({translateX:-h,translateY:-m},t)))),G(this.previews,function(d){var o=jt(d,Ke),p=o.width,w=o.height,S=p,v=w,j=1;n&&(j=p/n,v=i*j),i&&v>w&&(j=w/i,S=n*j,v=w),he(d,{width:S,height:v}),he(d.getElementsByTagName("img")[0],X({width:l*j,height:c*j},We(X({translateX:-h*j,translateY:-m*j},t))))}))}},kr={bind:function(){var t=this.element,a=this.options,s=this.cropper;Q(a.cropstart)&&te(t,bt,a.cropstart),Q(a.cropmove)&&te(t,ft,a.cropmove),Q(a.cropend)&&te(t,gt,a.cropend),Q(a.crop)&&te(t,ut,a.crop),Q(a.zoom)&&te(t,yt,a.zoom),te(s,$t,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&te(s,Gt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&te(s,Wt,this.onDblclick=this.dblclick.bind(this)),te(t.ownerDocument,Yt,this.onCropMove=this.cropMove.bind(this)),te(t.ownerDocument,Ht,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&te(window,Kt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,a=this.options,s=this.cropper;Q(a.cropstart)&&ae(t,bt,a.cropstart),Q(a.cropmove)&&ae(t,ft,a.cropmove),Q(a.cropend)&&ae(t,gt,a.cropend),Q(a.crop)&&ae(t,ut,a.crop),Q(a.zoom)&&ae(t,yt,a.zoom),ae(s,$t,this.onCropStart),a.zoomable&&a.zoomOnWheel&&ae(s,Gt,this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&ae(s,Wt,this.onDblclick),ae(t.ownerDocument,Yt,this.onCropMove),ae(t.ownerDocument,Ht,this.onCropEnd),a.responsive&&ae(window,Kt,this.onResize)}},Cr={resize:function(){if(!this.disabled){var t=this.options,a=this.container,s=this.containerData,n=a.offsetWidth/s.width,i=a.offsetHeight/s.height,l=Math.abs(n-1)>Math.abs(i-1)?n:i;if(l!==1){var c,h;t.restore&&(c=this.getCanvasData(),h=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(G(c,function(m,d){c[d]=m*l})),this.setCropBoxData(G(h,function(m,d){h[d]=m*l})))}}},dblclick:function(){this.disabled||this.options.dragMode===Da||this.setDragMode(cr(this.dragBox,xt)?Ca:Dt)},wheel:function(t){var a=this,s=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*s,t)))},cropStart:function(t){var a=t.buttons,s=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(O(a)&&a!==1||O(s)&&s!==0||t.ctrlKey))){var n=this.options,i=this.pointers,l;t.changedTouches?G(t.changedTouches,function(c){i[c.identifier]=Ge(c)}):i[t.pointerId||0]=Ge(t),Object.keys(i).length>1&&n.zoomable&&n.zoomOnTouch?l=ka:l=jt(t.target,$e),Zs.test(l)&&Pe(this.element,bt,{originalEvent:t,action:l})!==!1&&(t.preventDefault(),this.action=l,this.cropping=!1,l===wa&&(this.cropping=!0,V(this.dragBox,qe)))}},cropMove:function(t){var a=this.action;if(!(this.disabled||!a)){var s=this.pointers;t.preventDefault(),Pe(this.element,ft,{originalEvent:t,action:a})!==!1&&(t.changedTouches?G(t.changedTouches,function(n){X(s[n.identifier]||{},Ge(n,!0))}):X(s[t.pointerId||0]||{},Ge(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var a=this.action,s=this.pointers;t.changedTouches?G(t.changedTouches,function(n){delete s[n.identifier]}):delete s[t.pointerId||0],a&&(t.preventDefault(),Object.keys(s).length||(this.action=""),this.cropping&&(this.cropping=!1,De(this.dragBox,qe,this.cropped&&this.options.modal)),Pe(this.element,gt,{originalEvent:t,action:a}))}}},Dr={change:function(t){var a=this.options,s=this.canvasData,n=this.containerData,i=this.cropBoxData,l=this.pointers,c=this.action,h=a.aspectRatio,m=i.left,d=i.top,o=i.width,p=i.height,w=m+o,S=d+p,v=0,j=0,g=n.width,C=n.height,b=!0,R;!h&&t.shiftKey&&(h=o&&p?o/p:1),this.limited&&(v=i.minLeft,j=i.minTop,g=v+Math.min(n.width,s.width,s.left+s.width),C=j+Math.min(n.height,s.height,s.top+s.height));var z=l[Object.keys(l)[0]],x={x:z.endX-z.startX,y:z.endY-z.startY},y=function(E){switch(E){case ge:w+x.x>g&&(x.x=g-w);break;case fe:m+x.x<v&&(x.x=v-m);break;case de:d+x.y<j&&(x.y=j-d);break;case we:S+x.y>C&&(x.y=C-S);break}};switch(c){case Ct:m+=x.x,d+=x.y;break;case ge:if(x.x>=0&&(w>=g||h&&(d<=j||S>=C))){b=!1;break}y(ge),o+=x.x,o<0&&(c=fe,o=-o,m-=o),h&&(p=o/h,d+=(i.height-p)/2);break;case de:if(x.y<=0&&(d<=j||h&&(m<=v||w>=g))){b=!1;break}y(de),p-=x.y,d+=x.y,p<0&&(c=we,p=-p,d-=p),h&&(o=p*h,m+=(i.width-o)/2);break;case fe:if(x.x<=0&&(m<=v||h&&(d<=j||S>=C))){b=!1;break}y(fe),o-=x.x,m+=x.x,o<0&&(c=ge,o=-o,m-=o),h&&(p=o/h,d+=(i.height-p)/2);break;case we:if(x.y>=0&&(S>=C||h&&(m<=v||w>=g))){b=!1;break}y(we),p+=x.y,p<0&&(c=de,p=-p,d-=p),h&&(o=p*h,m+=(i.width-o)/2);break;case Ee:if(h){if(x.y<=0&&(d<=j||w>=g)){b=!1;break}y(de),p-=x.y,d+=x.y,o=p*h}else y(de),y(ge),x.x>=0?w<g?o+=x.x:x.y<=0&&d<=j&&(b=!1):o+=x.x,x.y<=0?d>j&&(p-=x.y,d+=x.y):(p-=x.y,d+=x.y);o<0&&p<0?(c=Oe,p=-p,o=-o,d-=p,m-=o):o<0?(c=ze,o=-o,m-=o):p<0&&(c=Ie,p=-p,d-=p);break;case ze:if(h){if(x.y<=0&&(d<=j||m<=v)){b=!1;break}y(de),p-=x.y,d+=x.y,o=p*h,m+=i.width-o}else y(de),y(fe),x.x<=0?m>v?(o-=x.x,m+=x.x):x.y<=0&&d<=j&&(b=!1):(o-=x.x,m+=x.x),x.y<=0?d>j&&(p-=x.y,d+=x.y):(p-=x.y,d+=x.y);o<0&&p<0?(c=Ie,p=-p,o=-o,d-=p,m-=o):o<0?(c=Ee,o=-o,m-=o):p<0&&(c=Oe,p=-p,d-=p);break;case Oe:if(h){if(x.x<=0&&(m<=v||S>=C)){b=!1;break}y(fe),o-=x.x,m+=x.x,p=o/h}else y(we),y(fe),x.x<=0?m>v?(o-=x.x,m+=x.x):x.y>=0&&S>=C&&(b=!1):(o-=x.x,m+=x.x),x.y>=0?S<C&&(p+=x.y):p+=x.y;o<0&&p<0?(c=Ee,p=-p,o=-o,d-=p,m-=o):o<0?(c=Ie,o=-o,m-=o):p<0&&(c=ze,p=-p,d-=p);break;case Ie:if(h){if(x.x>=0&&(w>=g||S>=C)){b=!1;break}y(ge),o+=x.x,p=o/h}else y(we),y(ge),x.x>=0?w<g?o+=x.x:x.y>=0&&S>=C&&(b=!1):o+=x.x,x.y>=0?S<C&&(p+=x.y):p+=x.y;o<0&&p<0?(c=ze,p=-p,o=-o,d-=p,m-=o):o<0?(c=Oe,o=-o,m-=o):p<0&&(c=Ee,p=-p,d-=p);break;case Sa:this.move(x.x,x.y),b=!1;break;case ka:this.zoom(xr(l),t),b=!1;break;case wa:if(!x.x||!x.y){b=!1;break}R=Ma(this.cropper),m=z.startX-R.left,d=z.startY-R.top,o=i.minWidth,p=i.minHeight,x.x>0?c=x.y>0?Ie:Ee:x.x<0&&(m-=o,c=x.y>0?Oe:ze),x.y<0&&(d-=p),this.cropped||(ne(this.cropBox,Z),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(i.width=o,i.height=p,i.left=m,i.top=d,this.action=c,this.renderCropBox()),G(l,function(k){k.startX=k.endX,k.startY=k.endY})}},_r={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&V(this.dragBox,qe),ne(this.cropBox,Z),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=X({},this.initialImageData),this.canvasData=X({},this.initialCanvasData),this.cropBoxData=X({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(X(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ne(this.dragBox,qe),V(this.cropBox,Z)),this},replace:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),a?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,G(this.previews,function(s){s.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ne(this.cropper,Bt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,V(this.cropper,Bt)),this},destroy:function(){var t=this.element;return t[H]?(t[H]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=this.canvasData,n=s.left,i=s.top;return this.moveTo(rt(t)?t:n+Number(t),rt(a)?a:i+Number(a))},moveTo:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=this.canvasData,n=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(O(t)&&(s.left=t,n=!0),O(a)&&(s.top=a,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,a){var s=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(s.width*t/s.naturalWidth,null,a)},zoomTo:function(t,a,s){var n=this.options,i=this.canvasData,l=i.width,c=i.height,h=i.naturalWidth,m=i.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&n.zoomable){var d=h*t,o=m*t;if(Pe(this.element,yt,{ratio:t,oldRatio:l/h,originalEvent:s})===!1)return this;if(s){var p=this.pointers,w=Ma(this.cropper),S=p&&Object.keys(p).length?pr(p):{pageX:s.pageX,pageY:s.pageY};i.left-=(d-l)*((S.pageX-w.left-i.left)/l),i.top-=(o-c)*((S.pageY-w.top-i.top)/c)}else Ce(a)&&O(a.x)&&O(a.y)?(i.left-=(d-l)*((a.x-i.left)/l),i.top-=(o-c)*((a.y-i.top)/c)):(i.left-=(d-l)/2,i.top-=(o-c)/2);i.width=d,i.height=o,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),O(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var a=this.imageData.scaleY;return this.scale(t,O(a)?a:1)},scaleY:function(t){var a=this.imageData.scaleX;return this.scale(O(a)?a:1,t)},scale:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=this.imageData,n=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(O(t)&&(s.scaleX=t,n=!0),O(a)&&(s.scaleY=a,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.options,s=this.imageData,n=this.canvasData,i=this.cropBoxData,l;if(this.ready&&this.cropped){l={x:i.left-n.left,y:i.top-n.top,width:i.width,height:i.height};var c=s.width/s.naturalWidth;if(G(l,function(d,o){l[o]=d/c}),t){var h=Math.round(l.y+l.height),m=Math.round(l.x+l.width);l.x=Math.round(l.x),l.y=Math.round(l.y),l.width=m-l.x,l.height=h-l.y}}else l={x:0,y:0,width:0,height:0};return a.rotatable&&(l.rotate=s.rotate||0),a.scalable&&(l.scaleX=s.scaleX||1,l.scaleY=s.scaleY||1),l},setData:function(t){var a=this.options,s=this.imageData,n=this.canvasData,i={};if(this.ready&&!this.disabled&&Ce(t)){var l=!1;a.rotatable&&O(t.rotate)&&t.rotate!==s.rotate&&(s.rotate=t.rotate,l=!0),a.scalable&&(O(t.scaleX)&&t.scaleX!==s.scaleX&&(s.scaleX=t.scaleX,l=!0),O(t.scaleY)&&t.scaleY!==s.scaleY&&(s.scaleY=t.scaleY,l=!0)),l&&this.renderCanvas(!0,!0);var c=s.width/s.naturalWidth;O(t.x)&&(i.left=t.x*c+n.left),O(t.y)&&(i.top=t.y*c+n.top),O(t.width)&&(i.width=t.width*c),O(t.height)&&(i.height=t.height*c),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?X({},this.containerData):{}},getImageData:function(){return this.sized?X({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,a={};return this.ready&&G(["left","top","width","height","naturalWidth","naturalHeight"],function(s){a[s]=t[s]}),a},setCanvasData:function(t){var a=this.canvasData,s=a.aspectRatio;return this.ready&&!this.disabled&&Ce(t)&&(O(t.left)&&(a.left=t.left),O(t.top)&&(a.top=t.top),O(t.width)?(a.width=t.width,a.height=t.width/s):O(t.height)&&(a.height=t.height,a.width=t.height*s),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,a;return this.ready&&this.cropped&&(a={left:t.left,top:t.top,width:t.width,height:t.height}),a||{}},setCropBoxData:function(t){var a=this.cropBoxData,s=this.options.aspectRatio,n,i;return this.ready&&this.cropped&&!this.disabled&&Ce(t)&&(O(t.left)&&(a.left=t.left),O(t.top)&&(a.top=t.top),O(t.width)&&t.width!==a.width&&(n=!0,a.width=t.width),O(t.height)&&t.height!==a.height&&(i=!0,a.height=t.height),s&&(n?a.height=a.width/s:i&&(a.width=a.height*s)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,s=gr(this.image,this.imageData,a,t);if(!this.cropped)return s;var n=this.getData(t.rounded),i=n.x,l=n.y,c=n.width,h=n.height,m=s.width/Math.floor(a.naturalWidth);m!==1&&(i*=m,l*=m,c*=m,h*=m);var d=c/h,o=me({aspectRatio:d,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=me({aspectRatio:d,width:t.minWidth||0,height:t.minHeight||0},"cover"),w=me({aspectRatio:d,width:t.width||(m!==1?s.width:c),height:t.height||(m!==1?s.height:h)}),S=w.width,v=w.height;S=Math.min(o.width,Math.max(p.width,S)),v=Math.min(o.height,Math.max(p.height,v));var j=document.createElement("canvas"),g=j.getContext("2d");j.width=Ae(S),j.height=Ae(v),g.fillStyle=t.fillColor||"transparent",g.fillRect(0,0,S,v);var C=t.imageSmoothingEnabled,b=C===void 0?!0:C,R=t.imageSmoothingQuality;g.imageSmoothingEnabled=b,R&&(g.imageSmoothingQuality=R);var z=s.width,x=s.height,y=i,k=l,E,N,A,T,M,B;y<=-c||y>z?(y=0,E=0,A=0,M=0):y<=0?(A=-y,y=0,E=Math.min(z,c+y),M=E):y<=z&&(A=0,E=Math.min(c,z-y),M=E),E<=0||k<=-h||k>x?(k=0,N=0,T=0,B=0):k<=0?(T=-k,k=0,N=Math.min(x,h+k),B=N):k<=x&&(T=0,N=Math.min(h,x-k),B=N);var f=[y,k,E,N];if(M>0&&B>0){var L=S/c;f.push(A*L,T*L,M*L,B*L)}return g.drawImage.apply(g,[s].concat(Na(f.map(function(P){return Math.floor(Ae(P))})))),j},setAspectRatio:function(t){var a=this.options;return!this.disabled&&!rt(t)&&(a.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var a=this.options,s=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var i=t===Dt,l=a.movable&&t===Ca;t=i||l?t:Da,a.dragMode=t,Ye(s,$e,t),De(s,xt,i),De(s,pt,l),a.cropBoxMovable||(Ye(n,$e,t),De(n,xt,i),De(n,pt,l))}return this}},Ar=le.Cropper,Ea=function(){function r(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ws(this,r),!t||!ar.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=X({},qt,Ce(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return $s(r,[{key:"init",value:function(){var a=this.element,s=a.tagName.toLowerCase(),n;if(!a[H]){if(a[H]=this,s==="img"){if(this.isImg=!0,n=a.getAttribute("src")||"",this.originalUrl=n,!n)return;n=a.src}else s==="canvas"&&window.HTMLCanvasElement&&(n=a.toDataURL());this.load(n)}}},{key:"load",value:function(a){var s=this;if(a){this.url=a,this.imageData={};var n=this.element,i=this.options;if(!i.rotatable&&!i.scalable&&(i.checkOrientation=!1),!i.checkOrientation||!window.ArrayBuffer){this.clone();return}if(er.test(a)){tr.test(a)?this.read(yr(a)):this.clone();return}var l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){l.getResponseHeader("content-type")!==Vt&&l.abort()},l.onload=function(){s.read(l.response)},l.onloadend=function(){s.reloading=!1,s.xhr=null},i.checkCrossOrigin&&Qt(a)&&n.crossOrigin&&(a=Zt(a)),l.open("GET",a,!0),l.responseType="arraybuffer",l.withCredentials=n.crossOrigin==="use-credentials",l.send()}}},{key:"read",value:function(a){var s=this.options,n=this.imageData,i=vr(a),l=0,c=1,h=1;if(i>1){this.url=jr(a,Vt);var m=Nr(i);l=m.rotate,c=m.scaleX,h=m.scaleY}s.rotatable&&(n.rotate=l),s.scalable&&(n.scaleX=c,n.scaleY=h),this.clone()}},{key:"clone",value:function(){var a=this.element,s=this.url,n=a.crossOrigin,i=s;this.options.checkCrossOrigin&&Qt(s)&&(n||(n="anonymous"),i=Zt(s)),this.crossOrigin=n,this.crossOriginUrl=i;var l=document.createElement("img");n&&(l.crossOrigin=n),l.src=i||s,l.alt=a.alt||"The image to crop",this.image=l,l.onload=this.start.bind(this),l.onerror=this.stop.bind(this),V(l,Ft),a.parentNode.insertBefore(l,a.nextSibling)}},{key:"start",value:function(){var a=this,s=this.image;s.onload=null,s.onerror=null,this.sizing=!0;var n=le.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(le.navigator.userAgent),i=function(m,d){X(a.imageData,{naturalWidth:m,naturalHeight:d,aspectRatio:m/d}),a.initialImageData=X({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(s.naturalWidth&&!n){i(s.naturalWidth,s.naturalHeight);return}var l=document.createElement("img"),c=document.body||document.documentElement;this.sizingImage=l,l.onload=function(){i(l.width,l.height),n||c.removeChild(l)},l.src=s.src,n||(l.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",c.appendChild(l))}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var a=this.element,s=this.options,n=this.image,i=a.parentNode,l=document.createElement("div");l.innerHTML=sr;var c=l.querySelector(".".concat(H,"-container")),h=c.querySelector(".".concat(H,"-canvas")),m=c.querySelector(".".concat(H,"-drag-box")),d=c.querySelector(".".concat(H,"-crop-box")),o=d.querySelector(".".concat(H,"-face"));this.container=i,this.cropper=c,this.canvas=h,this.dragBox=m,this.cropBox=d,this.viewBox=c.querySelector(".".concat(H,"-view-box")),this.face=o,h.appendChild(n),V(a,Z),i.insertBefore(c,a.nextSibling),ne(n,Ft),this.initPreview(),this.bind(),s.initialAspectRatio=Math.max(0,s.initialAspectRatio)||NaN,s.aspectRatio=Math.max(0,s.aspectRatio)||NaN,s.viewMode=Math.max(0,Math.min(3,Math.round(s.viewMode)))||0,V(d,Z),s.guides||V(d.getElementsByClassName("".concat(H,"-dashed")),Z),s.center||V(d.getElementsByClassName("".concat(H,"-center")),Z),s.background&&V(c,"".concat(H,"-bg")),s.highlight||V(o,Vs),s.cropBoxMovable&&(V(o,pt),Ye(o,$e,Ct)),s.cropBoxResizable||(V(d.getElementsByClassName("".concat(H,"-line")),Z),V(d.getElementsByClassName("".concat(H,"-point")),Z)),this.render(),this.ready=!0,this.setDragMode(s.dragMode),s.autoCrop&&this.crop(),this.setData(s.data),Q(s.ready)&&te(a,Xt,s.ready,{once:!0}),Pe(a,Xt)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),ne(this.element,Z)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Ar,r}},{key:"setDefaults",value:function(a){X(qt,Ce(a)&&a)}}])}();X(Ea.prototype,wr,Sr,kr,Cr,Dr,_r);var be=function(){return be=Object.assign||function(r){for(var t,a=1,s=arguments.length;a<s;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},be.apply(this,arguments)};function nt(r,t){var a={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(s=Object.getOwnPropertySymbols(r);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(a[s[n]]=r[s[n]])}return a}var Pr=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],Lr={opacity:0,maxWidth:"100%"},Tr=Ue.forwardRef(function(r,t){var a=nt(r,[]),s=a.dragMode,n=s===void 0?"crop":s,i=a.src,l=a.style,c=a.className,h=a.crossOrigin,m=a.scaleX,d=a.scaleY,o=a.enable,p=a.zoomTo,w=a.rotateTo,S=a.alt,v=S===void 0?"picture":S,j=a.ready,g=a.onInitialized,C=nt(a,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),b={scaleY:d,scaleX:m,enable:o,zoomTo:p,rotateTo:w},R=function(){for(var x=[],y=0;y<arguments.length;y++)x[y]=arguments[y];var k=u.useRef(null);return Ue.useEffect(function(){x.forEach(function(E){E&&(typeof E=="function"?E(k.current):E.current=k.current)})},[x]),k}(t,u.useRef(null));u.useEffect(function(){var x;!((x=R.current)===null||x===void 0)&&x.cropper&&typeof p=="number"&&R.current.cropper.zoomTo(p)},[a.zoomTo]),u.useEffect(function(){var x;!((x=R.current)===null||x===void 0)&&x.cropper&&i!==void 0&&R.current.cropper.reset().clear().replace(i)},[i]),u.useEffect(function(){if(R.current!==null){var x=new Ea(R.current,be(be({dragMode:n},C),{ready:function(y){y.currentTarget!==null&&function(k,E){E===void 0&&(E={});var N=E.enable,A=N===void 0||N,T=E.scaleX,M=T===void 0?1:T,B=E.scaleY,f=B===void 0?1:B,L=E.zoomTo,P=L===void 0?0:L,Y=E.rotateTo;A?k.enable():k.disable(),k.scaleX(M),k.scaleY(f),Y!==void 0&&k.rotateTo(Y),P>0&&k.zoomTo(P)}(y.currentTarget.cropper,b),j&&j(y)}}));g&&g(x)}return function(){var y,k;(k=(y=R.current)===null||y===void 0?void 0:y.cropper)===null||k===void 0||k.destroy()}},[R]);var z=function(x){return Pr.reduce(function(y,k){var E=y,N=k;return E[N],nt(E,[typeof N=="symbol"?N:N+""])},x)}(be(be({},C),{crossOrigin:h,src:i,alt:v}));return Ue.createElement("div",{style:l,className:c},Ue.createElement("img",be({},z,{style:Lr,ref:R})))});const ea=()=>{const r=Te(),{id:t}=vt(),[a,s]=u.useState(!1),[n,i]=u.useState(!1),[l,c]=u.useState(null),[h,m]=u.useState(null),d=u.useRef(null),[o,p]=u.useState({name:"",nik:"",birth_place:"",birth_date:"",address:"",religion:"",marital_status:"",occupation:"",nationality:"",bank_name:"",bank_account_name:"",bank_account_number:"",user_id:"",ktp_image:null,npwp_image:null}),[w,S]=u.useState(null),[v,j]=u.useState(null),[g,C]=u.useState([]);u.useEffect(()=>{b(),t&&(console.log("Editing Creator ID:",t),R(t))},[t]);const b=async()=>{try{const N=await I.get("/users");C(N.data)}catch(N){console.error("Failed to fetch users",N)}},R=async N=>{try{console.log("Fetching creator data for ID:",N);const A=await I.get(`/creators/${N}`);if(console.log("Fetched creator data:",A.data),A.data){const T=A.data,M=Array.isArray(T)?T[0]:T;console.log("Processed Creator Data:",M),p({name:M.name||"",nik:M.nik||"",birth_place:M.birth_place||"",birth_date:M.birth_date?M.birth_date.split("T")[0]:"",address:M.address||"",religion:M.religion||"",marital_status:M.marital_status||"",occupation:M.occupation||"",nationality:M.nationality||"",bank_name:M.bank_name||"",bank_account_name:M.bank_account_name||"",bank_account_number:M.bank_account_number||"",user_id:M.user_id||"",ktp_image:null,npwp_image:null}),M.ktp_path&&S(`http://localhost:5000/${M.ktp_path}`),M.npwp_path&&j(`http://localhost:5000/${M.npwp_path}`)}}catch(A){console.error("Failed to fetch creator",A)}},z=N=>{if(N.target.files&&N.target.files[0]){const A=N.target.files[0],T=new FileReader;T.onload=()=>{c(T.result),m("ktp"),i(!0)},T.readAsDataURL(A),N.target.value=""}},x=N=>{if(N.target.files&&N.target.files[0]){const A=N.target.files[0],T=new FileReader;T.onload=()=>{c(T.result),m("npwp"),i(!0)},T.readAsDataURL(A),N.target.value=""}},y=()=>{var A;const N=(A=d.current)==null?void 0:A.cropper;typeof N<"u"&&N.getCroppedCanvas().toBlob(async T=>{if(T){const M=h==="ktp"?"ktp_cropped.jpg":"npwp_cropped.jpg",B=new File([T],M,{type:"image/jpeg"});h==="ktp"?(p({...o,ktp_image:B}),S(URL.createObjectURL(T))):h==="npwp"&&(p({...o,npwp_image:B}),j(URL.createObjectURL(T))),i(!1),m(null)}},"image/jpeg")},k=N=>{var T;const A=(T=d.current)==null?void 0:T.cropper;A&&A.rotate(N)},E=async N=>{N.preventDefault(),s(!0);const A=new FormData;Object.entries(o).forEach(([T,M])=>{T==="ktp_image"?M&&A.append("ktp",M):T==="npwp_image"?M&&A.append("npwp",M):A.append(T,M)});try{t?await I.put(`/creators/${t}`,A):await I.post("/creators",A),r("/admin/creators")}catch(T){console.error(T),alert("Failed to save creator")}finally{s(!1)}};return e.jsxs("div",{className:"glass-panel min-h-[calc(100vh-2rem)]",children:[e.jsx("div",{className:"border-b border-white/30 px-6 py-4 flex items-center justify-between",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:t?"Edit Creator":"Add New Creator"})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("div",{className:"glass-card p-4 text-center mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Upload KTP"}),w?e.jsx("img",{src:w,alt:"KTP Preview",className:"w-full h-auto rounded mb-4"}):e.jsxs("div",{className:"h-40 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(se,{size:40,className:"mb-2"}),e.jsx("p",{children:"Click to Upload KTP"})]}),e.jsxs("label",{className:"block w-full",children:[e.jsx("span",{className:"sr-only",children:"Choose file"}),e.jsx("input",{type:"file",accept:"image/*",onChange:z,className:`block w-full text-sm text-gray-500
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-full file:border-0
                  file:text-sm file:font-semibold
                  file:bg-purple-50 file:text-purple-700
                  hover:file:bg-purple-100`})]})]}),e.jsxs("div",{className:"glass-card p-4 text-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Upload NPWP"}),v?e.jsx("img",{src:v,alt:"NPWP Preview",className:"w-full h-auto rounded mb-4"}):e.jsxs("div",{className:"h-40 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(se,{size:40,className:"mb-2"}),e.jsx("p",{children:"Click to Upload NPWP"})]}),e.jsxs("label",{className:"block w-full",children:[e.jsx("span",{className:"sr-only",children:"Choose file"}),e.jsx("input",{type:"file",accept:"image/*",onChange:x,className:`block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-purple-50 file:text-purple-700
                    hover:file:bg-purple-100`})]})]})]}),e.jsx("div",{className:"md:col-span-2 glass-panel p-6",children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),e.jsx("input",{type:"text",value:o.nik,onChange:N=>p({...o,nik:N.target.value}),className:"mt-1 block glass-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pemilik Akun User (Opsional)"}),e.jsxs("select",{value:o.user_id,onChange:N=>p({...o,user_id:N.target.value}),className:"mt-1 block w-full glass-input",children:[e.jsx("option",{value:"",children:"Pilih User"}),g.map(N=>e.jsxs("option",{value:N.id,children:[N.name," (",N.email,")"]},N.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("input",{type:"text",value:o.name,onChange:N=>p({...o,name:N.target.value}),className:"mt-1 block glass-input",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tempat Lahir"}),e.jsx("input",{type:"text",value:o.birth_place,onChange:N=>p({...o,birth_place:N.target.value}),className:"mt-1 block glass-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Lahir"}),e.jsx("input",{type:"date",value:o.birth_date,onChange:N=>p({...o,birth_date:N.target.value}),className:"mt-1 block glass-input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Alamat"}),e.jsx("textarea",{value:o.address,onChange:N=>p({...o,address:N.target.value}),className:"mt-1 block glass-input",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Agama"}),e.jsxs("select",{value:o.religion,onChange:N=>p({...o,religion:N.target.value}),className:"mt-1 block w-full glass-input",children:[e.jsx("option",{value:"",children:"Pilih Agama"}),e.jsx("option",{value:"ISLAM",children:"Islam"}),e.jsx("option",{value:"KRISTEN",children:"Kristen"}),e.jsx("option",{value:"KATOLIK",children:"Katolik"}),e.jsx("option",{value:"HINDU",children:"Hindu"}),e.jsx("option",{value:"BUDDHA",children:"Buddha"}),e.jsx("option",{value:"KONGHUCU",children:"Konghucu"}),e.jsx("option",{value:"LAINNYA",children:"Lainnya"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status Perkawinan"}),e.jsx("input",{type:"text",value:o.marital_status,onChange:N=>p({...o,marital_status:N.target.value}),className:"mt-1 block glass-input"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pekerjaan"}),e.jsx("input",{type:"text",value:o.occupation,onChange:N=>p({...o,occupation:N.target.value}),className:"mt-1 block glass-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kewarganegaraan"}),e.jsxs("select",{value:o.nationality,onChange:N=>p({...o,nationality:N.target.value}),className:"mt-1 block w-full glass-input",children:[e.jsx("option",{value:"",children:"Pilih Kewarganegaraan"}),e.jsx("option",{value:"WNI",children:"WNI"}),e.jsx("option",{value:"WNA",children:"WNA"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Data Rekening Bank"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Bank"}),e.jsx("input",{type:"text",value:o.bank_name,onChange:N=>p({...o,bank_name:N.target.value}),className:"mt-1 block glass-input",placeholder:"Contoh: BCA, Mandiri"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Pemilik Rekening"}),e.jsx("input",{type:"text",value:o.bank_account_name,onChange:N=>p({...o,bank_account_name:N.target.value}),className:"mt-1 block glass-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"No. Rekening"}),e.jsx("input",{type:"text",value:o.bank_account_number,onChange:N=>p({...o,bank_account_number:N.target.value}),className:"mt-1 block glass-input"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"submit",disabled:a,className:"glass-button flex items-center disabled:opacity-50",children:a?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(Qe,{size:20,className:"mr-2"})," Simpan Pencipta"]})})})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(ns,{className:"mr-2",size:20})," Crop & Rotate KTP"]}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ye,{size:24})})]}),e.jsx("div",{className:"flex-1 bg-gray-900 p-4 overflow-hidden flex items-center justify-center",children:e.jsx(Tr,{ref:d,style:{height:"100%",maxHeight:"60vh",width:"100%"},initialAspectRatio:1.58,src:l||"",viewMode:1,guides:!0,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1})}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t flex flex-wrap gap-4 justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>k(-90),className:"flex items-center px-3 py-2 bg-white border border-gray-300 rounded hover:bg-gray-100 text-gray-700",title:"Rotate Left",children:[e.jsx(ls,{size:18,className:"mr-1"})," -90°"]}),e.jsxs("button",{type:"button",onClick:()=>k(90),className:"flex items-center px-3 py-2 bg-white border border-gray-300 rounded hover:bg-gray-100 text-gray-700",title:"Rotate Right",children:[e.jsx(os,{size:18,className:"mr-1"})," +90°"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-100",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:y,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 flex items-center shadow-sm",children:[e.jsx(la,{size:18,className:"mr-2"})," Crop & Save"]})]})]})]})})]})},Mr=()=>{var n;const[r,t]=u.useState(null),[a,s]=u.useState([]);return u.useEffect(()=>{(async()=>{try{const l=await I.get("/dashboard/stats");t(l.data);const c=await I.get("/reports/analytics");s(c.data)}catch(l){console.error(l)}})()},[]),r?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsx(ke,{title:"Total Lagu",value:r.totalSongs,icon:e.jsx(Be,{})}),e.jsx(ke,{title:"Total Revenue",value:`Rp ${(n=r.totalRevenue)==null?void 0:n.toLocaleString()}`,icon:e.jsx(Le,{})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Revenue Analytics"}),e.jsx("div",{className:"h-80",children:e.jsx(wt,{width:"100%",height:"100%",children:e.jsxs(vs,{data:a,children:[e.jsx(da,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(ha,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12},dy:10}),e.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12}}),e.jsx(xa,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),e.jsx(Ns,{dataKey:"revenue",fill:"#7A4A88",radius:[4,4,0,0]})]})})})]})]}):e.jsx("div",{children:"Loading..."})},Rr=()=>{const[r,t]=u.useState(""),[a,s]=u.useState(null),[n,i]=u.useState(null),[l,c]=u.useState(null),[h,m]=u.useState(null),[d,o]=u.useState(null),[p,w]=u.useState(null),[S,v]=u.useState(!1),[j,g]=u.useState("");u.useEffect(()=>{C()},[]);const C=async()=>{try{const y=await I.get("/settings");if(y.data){t(y.data.company_name||"");const E="http://localhost:5000/api".replace("/api","");if(y.data.logo){const N=y.data.logo.replace(/\\/g,"/"),A=N.startsWith("http")?N:`${E}/${N}`;i(A)}if(y.data.login_background){const N=y.data.login_background.replace(/\\/g,"/"),A=N.startsWith("http")?N:`${E}/${N}`;m(A)}if(y.data.app_icon){const N=y.data.app_icon.replace(/\\/g,"/"),A=N.startsWith("http")?N:`${E}/${N}`;w(A)}}}catch(y){console.error("Failed to fetch settings",y)}},b=y=>{if(y.target.files&&y.target.files[0]){const k=y.target.files[0];s(k),i(URL.createObjectURL(k))}},R=y=>{if(y.target.files&&y.target.files[0]){const k=y.target.files[0];c(k),m(URL.createObjectURL(k))}},z=y=>{if(y.target.files&&y.target.files[0]){const k=y.target.files[0];o(k),w(URL.createObjectURL(k))}},x=async y=>{y.preventDefault(),v(!0),g("");const k=new FormData;k.append("company_name",r),a&&k.append("logo",a),l&&k.append("login_background",l),d&&k.append("app_icon",d);try{await I.put("/settings",k,{headers:{"Content-Type":"multipart/form-data"}}),g("Settings updated successfully")}catch(E){console.error("Failed to update settings",E),g("Failed to update settings")}finally{v(!1)}};return e.jsxs("div",{className:"glass-panel p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-[#7A4A88]",children:"Settings"}),j&&e.jsx("div",{className:`p-4 rounded-md mb-4 ${j.includes("success")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:j}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:r,onChange:y=>t(y.target.value),className:"glass-input",placeholder:"Enter company name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-24 h-24 border border-white/40 rounded-md overflow-hidden flex items-center justify-center bg-white/50",children:n?e.jsx("img",{src:n,alt:"Logo Preview",className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No Logo"})}),e.jsxs("label",{className:"cursor-pointer bg-[#7A4A88] text-white px-4 py-2 rounded-md hover:bg-[#6a3d77] transition-colors flex items-center",children:[e.jsx(se,{size:18,className:"mr-2"}),e.jsx("span",{children:"Upload Logo"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:b})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"App Icon (Favicon)"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 border border-white/40 rounded-md overflow-hidden flex items-center justify-center bg-white/50",children:p?e.jsx("img",{src:p,alt:"Icon Preview",className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-gray-400 text-[10px]",children:"No Icon"})}),e.jsxs("label",{className:"cursor-pointer bg-[#7A4A88] text-white px-4 py-2 rounded-md hover:bg-[#6a3d77] transition-colors flex items-center",children:[e.jsx(se,{size:18,className:"mr-2"}),e.jsx("span",{children:"Upload Icon"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:z})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Login Background (Opacity 60%)"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-48 h-24 border border-white/40 rounded-md overflow-hidden flex items-center justify-center bg-white/50 relative",children:h?e.jsxs("div",{className:"w-full h-full relative",children:[e.jsx("img",{src:h,alt:"Bg Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"})," "]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No Background"})}),e.jsxs("label",{className:"cursor-pointer bg-[#7A4A88] text-white px-4 py-2 rounded-md hover:bg-[#6a3d77] transition-colors flex items-center",children:[e.jsx(se,{size:18,className:"mr-2"}),e.jsx("span",{children:"Upload Background"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:R})]})]})]}),e.jsxs("button",{type:"submit",disabled:S,className:"glass-button flex items-center disabled:opacity-50",children:[e.jsx(Qe,{size:18,className:"mr-2"}),S?"Saving...":"Save Settings"]})]})]})},Er=()=>{const[r,t]=u.useState([]),[a,s]=u.useState({total_net_revenue:0,total_sub_pub_share:0,total_tbw_share:0}),[n,i]=u.useState(!0),[l,c]=u.useState(""),[h,m]=u.useState(1),[d,o]=u.useState(20),[p,w]=u.useState(""),[S,v]=u.useState("");u.useEffect(()=>{j()},[p,S]);const j=async()=>{i(!0);try{const x={};p&&(x.month=p),S&&(x.year=S);const y=await I.get("/reports",{params:x});t(y.data.reports),s(y.data.summary||{total_net_revenue:0,total_sub_pub_share:0,total_tbw_share:0})}catch(x){console.error("Failed to fetch reports",x)}finally{i(!1)}},g=r.filter(x=>x.title&&x.title.toLowerCase().includes(l.toLowerCase())||x.custom_id&&x.custom_id.toLowerCase().includes(l.toLowerCase())||x.writer&&x.writer.toLowerCase().includes(l.toLowerCase())),C=Math.ceil(g.length/d),b=(h-1)*d,R=g.slice(b,b+d),z=x=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(x);return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Data Report"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"glass-panel p-6 flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4",children:e.jsx(Le,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Net Revenue"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:z(a.total_net_revenue)})]})]}),e.jsxs("div",{className:"glass-panel p-6 flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-purple-100 text-purple-600 mr-4",children:e.jsx(cs,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Sub Publisher Share"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:z(a.total_sub_pub_share)})]})]}),e.jsxs("div",{className:"glass-panel p-6 flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-green-100 text-green-600 mr-4",children:e.jsx(ds,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"TBW Share"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:z(a.total_tbw_share)})]})]})]}),e.jsxs("div",{className:"glass-panel",children:[e.jsx("div",{className:"p-4 border-b border-white/30 flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:p,onChange:x=>w(x.target.value?Number(x.target.value):""),className:"glass-input py-2 px-3 text-sm w-32",children:[e.jsx("option",{value:"",children:"All Months"}),Array.from({length:12},(x,y)=>e.jsx("option",{value:y+1,children:new Date(0,y).toLocaleString("default",{month:"long"})},y+1))]}),e.jsxs("select",{value:S,onChange:x=>v(x.target.value?Number(x.target.value):""),className:"glass-input py-2 px-3 text-sm w-24",children:[e.jsx("option",{value:"",children:"All Years"}),Array.from({length:5},(x,y)=>{const k=new Date().getFullYear()-2+y;return e.jsx("option",{value:k,children:k},k)})]})]}),e.jsxs("div",{className:"flex-1 md:max-w-md relative",children:[e.jsx("input",{type:"text",placeholder:"Search by Custom ID, Title, or Writer...",className:"glass-input pl-10 w-full",value:l,onChange:x=>{c(x.target.value),m(1)}}),e.jsx(re,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Show:"}),e.jsxs("select",{value:d,onChange:x=>{o(Number(x.target.value)),m(1)},className:"glass-input py-1 px-2 text-sm w-20",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-purple-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Periode"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custom ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Judul"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pencipta"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asal Report"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sub Publisher Share (Revenue)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-transparent divide-y divide-gray-200/50",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 text-center",children:"Loading..."})}):R.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No reports found"})}):R.map((x,y)=>e.jsxs("tr",{className:y%2===0?"bg-white/50":"bg-white/30",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.month&&x.year?`${new Date(0,x.month-1).toLocaleString("default",{month:"short"})} ${x.year}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x.custom_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.writer}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.source}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:z(x.sub_pub_share)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:x.is_matched?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Matched"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:"Unmatched"})})]},y))})]})}),C>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-white/30 flex items-center justify-between bg-white/20",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-medium",children:b+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(b+d,g.length)})," of ",e.jsx("span",{className:"font-medium",children:g.length})," results"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>m(x=>Math.max(x-1,1)),disabled:h===1,className:"px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,C)},(x,y)=>{let k=y+1;return C>5&&(h>3&&(k=h-2+y),k>C&&(k=C-(4-y))),e.jsx("button",{onClick:()=>m(k),className:`px-3 py-1 border rounded-md ${h===k?"bg-purple-600 text-white border-purple-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:k},k)}),e.jsx("button",{onClick:()=>m(x=>Math.min(x+1,C)),disabled:h===C,className:"px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})},zr=()=>{const[r,t]=u.useState(!1),[a,s]=u.useState(1),[n,i]=u.useState(new Date().getMonth()+1),[l,c]=u.useState(new Date().getFullYear()),[h,m]=u.useState(""),[d,o]=u.useState(null),[p,w]=u.useState([]),[S,v]=u.useState(""),[j,g]=u.useState(1),C=10,b=u.useRef(null);u.useEffect(()=>{R()},[]);const R=async()=>{try{const f=await I.get("/reports/history");w(f.data)}catch(f){console.error("Failed to fetch import history",f)}},z=async f=>{if(confirm("Apakah Anda yakin ingin menghapus riwayat import ini? Data laporan terkait TIDAK akan terhapus, hanya riwayat import saja."))try{await I.delete(`/reports/history/${f}`),w(L=>L.filter(P=>P.id!==f))}catch(L){console.error("Failed to delete history",L),alert("Gagal menghapus riwayat")}},x=()=>{a<3&&s(a+1)},y=()=>{a>1&&s(a-1)},k=f=>{var P;const L=(P=f.target.files)==null?void 0:P[0];L&&o(L)},E=async()=>{var L,P;if(!d)return;t(!0);const f=new FormData;f.append("report",d),f.append("month",n.toString()),f.append("year",l.toString()),f.append("period",h||"");try{const Y=await I.post("/reports/import",f,{headers:{"Content-Type":"multipart/form-data"}});alert(`Import successful! Inserted: ${Y.data.inserted} records.`),Y.data.errors&&Y.data.errors.length>0&&alert(`Some warnings:
${Y.data.errors.join(`
`)}`),R(),o(null),m(""),s(1),b.current&&(b.current.value="")}catch(Y){console.error("Import failed",Y),alert(`Import failed: ${((P=(L=Y.response)==null?void 0:L.data)==null?void 0:P.message)||Y.message}`)}finally{t(!1)}},N=[{id:1,title:"Bulan Laporan",icon:hs},{id:2,title:"Periode Pelaporan",icon:ee},{id:3,title:"Upload Dokumen",icon:se}],A=p.filter(f=>f.file_name&&f.file_name.toLowerCase().includes(S.toLowerCase())||f.status&&f.status.toLowerCase().includes(S.toLowerCase())),T=Math.ceil(A.length/C),M=(j-1)*C,B=A.slice(M,M+C);return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Import Report"}),e.jsxs("div",{className:"glass-panel p-8 mb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-8",children:N.map((f,L)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors duration-300 ${a>=f.id?"bg-purple-600 text-white shadow-lg":"bg-gray-200 text-gray-500"}`,children:a>f.id?e.jsx(la,{size:20}):e.jsx(f.icon,{size:18})}),e.jsx("span",{className:`text-xs mt-2 font-medium ${a>=f.id?"text-purple-600":"text-gray-400"}`,children:f.title})]}),L<N.length-1&&e.jsx("div",{className:`w-24 h-1 mx-2 rounded -mt-6 transition-colors duration-300 ${a>f.id?"bg-purple-600":"bg-gray-200"}`})]},f.id))}),e.jsxs("div",{className:"max-w-md mx-auto min-h-[200px]",children:[a===1&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsx("h3",{className:"text-lg font-semibold text-center mb-4 text-gray-700",children:"Detail Bulan Laporan"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bulan"}),e.jsx("select",{value:n,onChange:f=>i(Number(f.target.value)),className:"glass-input w-full",children:Array.from({length:12},(f,L)=>e.jsx("option",{value:L+1,children:new Date(0,L).toLocaleString("default",{month:"long"})},L+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tahun"}),e.jsx("select",{value:l,onChange:f=>c(Number(f.target.value)),className:"glass-input w-full",children:Array.from({length:5},(f,L)=>{const P=new Date().getFullYear()-2+L;return e.jsx("option",{value:P,children:P},P)})})]})]})]}),a===2&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsx("h3",{className:"text-lg font-semibold text-center mb-4 text-gray-700",children:"Detail Periode Pelaporan"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keterangan Periode (Opsional)"}),e.jsx("input",{type:"text",value:h,onChange:f=>m(f.target.value),placeholder:"Contoh: Q1 2025, Semester 1",className:"glass-input w-full"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tambahkan catatan khusus untuk periode import ini."})]})]}),a===3&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsx("h3",{className:"text-lg font-semibold text-center mb-4 text-gray-700",children:"Upload Dokumen Laporan"}),e.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-colors ${d?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-purple-400 hover:bg-gray-50"}`,onClick:()=>{var f;return(f=b.current)==null?void 0:f.click()},children:[e.jsx("input",{type:"file",ref:b,onChange:k,className:"hidden",accept:".xlsx, .xls, .csv"}),d?e.jsxs("div",{className:"flex flex-col items-center text-purple-700",children:[e.jsx(ee,{size:48,className:"mb-2"}),e.jsx("span",{className:"font-medium truncate max-w-full",children:d.name}),e.jsxs("span",{className:"text-xs text-purple-500 mt-1",children:[(d.size/1024).toFixed(2)," KB"]}),e.jsx("button",{className:"mt-4 text-xs bg-white border border-purple-200 px-3 py-1 rounded-full hover:bg-purple-100",children:"Ganti File"})]}):e.jsxs("div",{className:"flex flex-col items-center text-gray-500 cursor-pointer",children:[e.jsx(se,{size:48,className:"mb-2 text-gray-400"}),e.jsx("span",{className:"font-medium",children:"Klik untuk upload file"}),e.jsx("span",{className:"text-xs mt-1",children:"Format: .xlsx, .xls, .csv"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8 max-w-md mx-auto border-t border-gray-100 pt-6",children:[e.jsx("button",{onClick:y,disabled:a===1||r,className:`px-6 py-2 rounded-lg text-sm font-medium transition-colors ${a===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,children:"Kembali"}),a<3?e.jsxs("button",{onClick:x,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2 text-sm font-medium shadow-md transition-transform hover:scale-105",children:["Lanjut ",e.jsx(Je,{size:16})]}):e.jsx("button",{onClick:E,disabled:!d||r,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 text-sm font-medium shadow-md transition-transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs(e.Fragment,{children:[e.jsx(ms,{className:"animate-spin",size:16})," Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{size:16})," Mulai Import"]})})]})]}),e.jsxs("div",{className:"glass-panel p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Riwayat Import"}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("input",{type:"text",placeholder:"Search file name...",className:"pl-10 w-full border rounded-lg py-2 px-3 focus:ring-purple-500 focus:border-purple-500 text-sm",value:S,onChange:f=>{v(f.target.value),g(1)}}),e.jsx(re,{className:"absolute left-3 top-2.5 text-gray-400",size:18})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Periode"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Records"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Uploaded"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No import history found"})}):B.map(f=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:f.file_name}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(0,f.month-1).toLocaleString("default",{month:"long"})," ",f.year,f.period&&e.jsx("span",{className:"block text-xs text-gray-400",children:f.period})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f.total_records}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${f.status==="Success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(f.created_at).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>z(f.id),className:"text-red-600 hover:text-red-900 hover:bg-red-50 p-2 rounded-full transition-colors",title:"Hapus Riwayat",children:e.jsx(na,{size:18})})})]},f.id))})]})}),T>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-medium",children:M+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(M+C,A.length)})," of ",e.jsx("span",{className:"font-medium",children:A.length})," results"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>g(f=>Math.max(f-1,1)),disabled:j===1,className:"px-3 py-1 border rounded hover:bg-gray-50 disabled:opacity-50 text-sm",children:"Previous"}),Array.from({length:Math.min(5,T)},(f,L)=>{let P=L+1;return T>5&&(j>3&&(P=j-2+L),P>T&&(P=T-(4-L))),e.jsx("button",{onClick:()=>g(P),className:`px-3 py-1 border rounded text-sm ${j===P?"bg-purple-600 text-white border-purple-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:P},P)}),e.jsx("button",{onClick:()=>g(f=>Math.min(f+1,T)),disabled:j===T,className:"px-3 py-1 border rounded hover:bg-gray-50 disabled:opacity-50 text-sm",children:"Next"})]})]})]})]})},Ir=()=>e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Analitik (Analytics)"}),e.jsx("div",{className:"glass-panel text-center py-20 text-gray-500",children:"Analytics Content Coming Soon"})]}),Or=()=>{const[r,t]=u.useState([]),[a,s]=u.useState(""),[n,i]=u.useState(!0),[l,c]=u.useState(null),[h,m]=u.useState(!1),[d,o]=u.useState("user"),[p,w]=u.useState({status:"",percentage_share:0,role:"user"});u.useEffect(()=>{S()},[]);const S=async()=>{i(!0);try{const b=await I.get("/users");t(b.data)}catch(b){console.error("Failed to fetch users",b)}finally{i(!1)}},v=r.filter(b=>{const R=b.name&&b.name.toLowerCase().includes(a.toLowerCase())||b.email&&b.email.toLowerCase().includes(a.toLowerCase()),z=(b.role||"user")===d;return R&&z}),j=b=>{c(b),w({status:b.status||"pending",percentage_share:b.percentage_share||0,role:b.role||"user"}),m(!0)},g=async()=>{if(l)try{await I.put(`/users/${l.id}`,p),m(!1),S()}catch(b){console.error("Failed to update user",b),alert("Failed to update user status")}},C=async()=>{if(l)try{await I.post(`/users/${l.id}/contract`),alert("Contract generated successfully! (Mock)")}catch(b){console.error("Failed to generate contract",b),alert("Failed to generate contract")}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Manajemen User"})}),e.jsxs("div",{className:"glass-panel",children:[e.jsx("div",{className:"flex border-b border-gray-200",children:["user","admin","operator"].map(b=>e.jsxs("button",{onClick:()=>o(b),className:`px-6 py-3 text-sm font-medium capitalize transition-colors
                        ${d===b?"border-b-2 border-purple-600 text-purple-600 bg-purple-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[b,"s"]},b))}),e.jsx("div",{className:"p-4 border-b border-white/30",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx("input",{type:"text",placeholder:`Cari ${d}...`,className:"glass-input pl-10 w-full",value:a,onChange:b=>s(b.target.value)}),e.jsx(re,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200/50",children:[e.jsx("thead",{className:"bg-purple-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),d==="user"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Share (%)"})]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-transparent divide-y divide-gray-200/50",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:d==="user"?7:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading..."})}):v.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:d==="user"?7:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:["No ",d,"s found"]})}):v.map((b,R)=>e.jsxs("tr",{className:R%2===0?"bg-white/50":"bg-white/30",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:b.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:b.role||"user"}),d==="user"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                                    ${(b.status||"pending")==="accepted"?"bg-green-100 text-green-800":(b.status||"pending")==="review"?"bg-yellow-100 text-yellow-800":(b.status||"pending")==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:b.status||"pending"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[b.percentage_share||0,"%"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.created_at?new Date(b.created_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("button",{onClick:()=>j(b),className:"text-purple-600 hover:text-purple-900 flex items-center gap-1 ml-auto",children:[e.jsx(xs,{size:16})," Manage"]})})]},b.id))})]})})]}),h&&l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-[500px] max-w-[90%]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Manage User: ",l.name]}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ps,{size:24})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("div",{className:"flex gap-3",children:["user","operator","admin"].map(b=>e.jsx("button",{onClick:()=>w({...p,role:b}),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium border transition-all capitalize
                                          ${p.role===b?"border-purple-600 bg-purple-50 text-purple-700 ring-1 ring-purple-600":"border-gray-200 hover:bg-gray-50 text-gray-600"}`,children:b},b))})]}),p.role==="user"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["pending","review","accepted","rejected"].map(b=>e.jsxs("button",{onClick:()=>w({...p,status:b}),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center justify-center gap-2
                                          ${p.status===b?"border-purple-600 bg-purple-50 text-purple-700 ring-1 ring-purple-600":"border-gray-200 hover:bg-gray-50 text-gray-600"}`,children:[b==="pending"&&e.jsx(us,{size:16}),b==="review"&&e.jsx(Fe,{size:16}),b==="accepted"&&e.jsx(ct,{size:16}),b==="rejected"&&e.jsx(gs,{size:16}),e.jsx("span",{className:"capitalize",children:b})]},b))})]}),p.role==="user"&&p.status==="review"&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("h4",{className:"font-semibold text-yellow-800 mb-3 flex items-center gap-2",children:[e.jsx(Fe,{size:18})," Review Process"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-800 mb-1",children:"Percentage Share (%)"}),e.jsx("input",{type:"number",value:p.percentage_share,onChange:b=>w({...p,percentage_share:Number(b.target.value)}),className:"block w-full rounded-md border-yellow-300 shadow-sm focus:border-yellow-500 focus:ring-yellow-500 sm:text-sm p-2",placeholder:"e.g. 70",min:"0",max:"100"}),e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Potongan untuk user ini."})]}),e.jsxs("button",{onClick:C,className:"w-full flex items-center justify-center gap-2 bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 transition-colors",children:[e.jsx(ee,{size:18})," Generate Contract"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",children:"Cancel"}),e.jsx("button",{onClick:g,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium",children:"Save Changes"})]})]})]})})]})},Ur=()=>{const r=Te(),[t,a]=u.useState([]),[s,n]=u.useState(!1),[i,l]=u.useState("all"),[c,h]=u.useState("all"),[m,d]=u.useState("all");u.useEffect(()=>{o()},[i,c]);const o=async()=>{n(!0);try{const g={};i!=="all"&&(g.month=i),c!=="all"&&(g.year=c);const C=await I.get("/payments/calculate",{params:g});a(C.data)}catch(g){console.error("Failed to fetch payment calculations",g)}finally{n(!1)}},p=t.filter(g=>m==="all"?!0:(g.payment_status||"pending")===m),w=(g,C,b)=>{r(`/admin/payments/${g}`,{state:{month:C||i,year:b||c}})},S=g=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),v=g=>{switch(g){case"success":return e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold border border-green-200",children:"LUNAS"});case"process":return e.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-bold border border-yellow-200",children:"PROSES"});default:return e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-bold border border-gray-200",children:"BELUM BAYAR"})}},j=g=>new Date(0,g-1).toLocaleString("default",{month:"long"});return e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(Et,{size:24}),"Perhitungan Pembayaran (Payment Calculation)"]}),e.jsxs("div",{className:"glass-panel p-6 mb-8",children:[e.jsxs("div",{className:"flex gap-4 items-end mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bulan"}),e.jsxs("select",{value:i,onChange:g=>l(g.target.value==="all"?"all":Number(g.target.value)),className:"glass-input w-40",children:[e.jsx("option",{value:"all",children:"Semua Bulan"}),Array.from({length:12},(g,C)=>e.jsx("option",{value:C+1,children:new Date(0,C).toLocaleString("default",{month:"long"})},C+1))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tahun"}),e.jsxs("select",{value:c,onChange:g=>h(g.target.value==="all"?"all":Number(g.target.value)),className:"glass-input w-32",children:[e.jsx("option",{value:"all",children:"Semua Tahun"}),Array.from({length:5},(g,C)=>{const b=new Date().getFullYear()-2+C;return e.jsx("option",{value:b,children:b},b)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:m,onChange:g=>d(g.target.value),className:"glass-input w-40",children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"pending",children:"Belum Bayar"}),e.jsx("option",{value:"process",children:"Proses"}),e.jsx("option",{value:"success",children:"Lunas"})]})]}),e.jsxs("button",{onClick:o,className:"btn-primary flex items-center gap-2",children:[e.jsx(Et,{size:18})," Hitung Ulang"]})]}),s?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Menghitung data pembayaran..."})]}):p.length===0?e.jsx("div",{className:"text-center py-12 bg-white/50 rounded-lg border border-dashed border-gray-300",children:e.jsx("p",{className:"text-gray-500",children:"Tidak ada data transaksi untuk kriteria ini."})}):e.jsx("div",{className:"space-y-4",children:p.map((g,C)=>e.jsxs("div",{onClick:()=>w(g.user_id,g.month,g.year),className:"glass-panel p-6 flex flex-col md:flex-row items-center justify-between gap-4 cursor-pointer hover:border-purple-300 transition-all group hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-bold text-xl group-hover:bg-purple-600 group-hover:text-white transition-colors",children:g.user_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg group-hover:text-purple-700 transition-colors",children:g.user_name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Potongan Admin: ",e.jsxs("span",{className:"text-purple-600 font-medium",children:[g.user_percentage,"%"]})]}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsxs("span",{className:"font-medium text-gray-700",children:[j(g.month)," ",g.year]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-8 text-right",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium",children:"Total Revenue"}),e.jsx("p",{className:"text-lg font-bold text-gray-800",children:S(g.total_revenue)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium",children:"Admin Share"}),e.jsxs("p",{className:"text-lg font-bold text-red-500",children:["-",S(g.admin_share)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium",children:"Net Payable"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:S(g.net_share)})]}),e.jsxs("div",{className:"pl-4 border-l border-gray-100 flex flex-col items-center justify-center gap-2",children:[v(g.payment_status),e.jsx(Je,{size:24,className:"text-gray-400 group-hover:text-purple-600 transition-colors"})]})]})]},`${g.user_id}-${g.month}-${g.year}-${C}`))})]})]})},Br=()=>{var M,B;const{userId:r}=vt(),t=ta(),a=Te(),[s,n]=u.useState(null),[i,l]=u.useState(!0),[c,h]=u.useState([]),[m,d]=u.useState("pending"),[o,p]=u.useState(null),[w,S]=u.useState(!1),[v,j]=u.useState(!1),[g,C]=u.useState(null),b=new URLSearchParams(t.search),R=(f,L)=>{if(L!==void 0)return L;const P=b.get(f);return P==="all"?"all":P?Number(P):f==="year"?new Date().getFullYear():new Date().getMonth()+1},z=R("month",(M=t.state)==null?void 0:M.month)??"all",x=R("year",(B=t.state)==null?void 0:B.year)??"all";u.useEffect(()=>{y()},[r,z,x]);const y=async()=>{l(!0);try{const f={};z!=="all"&&(f.month=z),x!=="all"&&(f.year=x);const P=(await I.get("/payments/calculate",{params:f})).data.find(Y=>Y.user_id===Number(r));if(n(P),P&&P.payment_status&&d(P.payment_status),P&&P.proof_file){const _="http://localhost:5000/api".replace("/api","");C(`${_}/uploads/proof/${P.proof_file}`)}else C(null)}catch(f){console.error("Failed to fetch payment details",f)}finally{l(!1)}},k=async()=>{if(m==="success"&&!o&&!(s!=null&&s.proof_file)){alert("Mohon upload bukti transfer untuk status Success");return}S(!0);try{const f=new FormData;f.append("user_id",r),z!=="all"&&f.append("month",z.toString()),x!=="all"&&f.append("year",x.toString()),f.append("status",m),o&&f.append("proof",o),await I.post("/payments/status",f,{headers:{"Content-Type":"multipart/form-data"}}),alert("Status berhasil diperbarui"),y()}catch(f){console.error("Failed to update status",f),alert("Gagal memperbarui status")}finally{S(!1)}},E=f=>{h(L=>L.includes(f)?L.filter(P=>P!==f):[...L,f])},N=f=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(f),T=(()=>{if(!s)return[];const f={};return s.songs.forEach(L=>{L.writers.forEach(P=>{f[P.name]||(f[P.name]={name:P.name,role:P.role,total_amount:0,songs:[]}),f[P.name].total_amount+=P.amount,f[P.name].songs.push({title:L.title,song_id:L.song_id,share_percent:P.share_percent,amount:P.amount})})}),Object.values(f)})();return i?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):s?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>a(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(fs,{size:24,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:"Detail Pembayaran"}),e.jsxs("p",{className:"text-gray-500",children:["Periode: ",z==="all"?"Semua Bulan":new Date(0,z-1).toLocaleString("default",{month:"long"})," ",x==="all"?"Semua Tahun":x]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-purple-100 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-50 rounded-full -mr-16 -mt-16 z-0"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-purple-600",children:e.jsx(_e,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:s.user_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["User ID: #",s.user_id]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Total Revenue"}),e.jsx("span",{className:"font-bold text-gray-800",children:N(s.total_revenue)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-500 text-sm",children:["Royalti Share (",s.user_percentage,"%)"]}),e.jsxs("span",{className:"font-bold text-red-500",children:["-",N(s.admin_share)]})]}),e.jsxs("div",{className:"border-t border-dashed border-gray-200 my-2 pt-2 flex justify-between",children:[e.jsx("span",{className:"text-gray-800 font-medium",children:"Net Payable"}),e.jsx("span",{className:"font-bold text-xl text-green-600",children:N(s.net_share)})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ct,{size:18})," Status Transfer"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Saat Ini"}),e.jsxs("select",{value:m,onChange:f=>d(f.target.value),className:"glass-input w-full",children:[e.jsx("option",{value:"pending",children:"Pending Transfer"}),e.jsx("option",{value:"process",children:"Proses Transfer"}),e.jsx("option",{value:"success",children:"Transfer Success"})]})]}),m==="success"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bukti Transfer (Image)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:bg-gray-50 transition-colors relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:f=>p(f.target.files?f.target.files[0]:null),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsxs("div",{className:"flex flex-col items-center gap-2 text-gray-500",children:[e.jsx(se,{size:24}),e.jsx("span",{className:"text-sm",children:o?o.name:s.proof_file?"Ganti File Bukti":"Klik untuk upload"})]})]}),s.proof_file&&!o&&e.jsxs("div",{className:"mt-3 flex items-center justify-between bg-green-50 p-3 rounded-lg border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700",children:[e.jsx(ct,{size:16}),e.jsx("span",{children:"Bukti Tersimpan"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"text-xs bg-white border border-green-200 text-green-700 px-3 py-1.5 rounded-md hover:bg-green-100 flex items-center gap-1 transition-colors",children:[e.jsx(He,{size:12})," Lihat"]})]})]}),e.jsx("button",{onClick:k,disabled:w,className:"w-full btn-primary flex items-center justify-center gap-2",children:w?"Menyimpan...":e.jsxs(e.Fragment,{children:[e.jsx(Qe,{size:18})," Simpan Status"]})})]})]})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ee,{size:20})," Rincian Pencipta"]}),e.jsx("div",{className:"space-y-4",children:T.map((f,L)=>e.jsxs("div",{className:"bg-white rounded-lg border border-purple-100 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-purple-50/30 transition-colors",onClick:()=>E(f.name),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-1 rounded-full ${c.includes(f.name)?"bg-purple-100 text-purple-600":"text-gray-400"}`,children:c.includes(f.name)?e.jsx(sa,{size:20}):e.jsx(Je,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800",children:f.name}),e.jsx("p",{className:"text-xs text-gray-500",children:f.role})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Diterima"}),e.jsx("p",{className:"font-bold text-green-600 text-lg",children:N(f.total_amount)})]})]}),c.includes(f.name)&&e.jsxs("div",{className:"bg-gray-50 border-t border-gray-100 p-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"Rincian Lagu"}),e.jsx("div",{className:"space-y-2",children:f.songs.map((P,Y)=>e.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:P.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Share: ",P.share_percent,"%"]})]}),e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:N(P.amount)})]},Y))})]})]},L))})]})]}),v&&g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"relative max-w-2xl w-full bg-white rounded-xl overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Bukti Transfer"}),e.jsx("button",{onClick:()=>j(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(ye,{size:20,className:"text-gray-500"})})]}),e.jsx("div",{className:"p-4 bg-gray-100 flex justify-center",children:e.jsx("img",{src:g,alt:"Bukti Transfer",className:"max-h-[70vh] object-contain rounded-lg shadow-sm"})}),e.jsx("div",{className:"p-4 border-t border-gray-100 flex justify-end",children:e.jsxs("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:[e.jsx(Nt,{size:16})," Buka Original"]})})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Data tidak ditemukan."}),e.jsx("button",{onClick:()=>a(-1),className:"mt-4 text-purple-600 hover:underline",children:"Kembali"})]})},Fr=()=>{const[r,t]=u.useState([]),[a,s]=u.useState(""),[n,i]=u.useState(!0);u.useEffect(()=>{l()},[]);const l=async()=>{i(!0);try{const h=await I.get("/creators");Array.isArray(h.data)?t(h.data):h.data&&h.data.data&&t(h.data.data)}catch(h){console.error("Failed to fetch creators",h)}finally{i(!1)}},c=r.filter(h=>h.name.toLowerCase().includes(a.toLowerCase())||h.nik&&h.nik.includes(a));return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Data Pencipta Saya"})}),e.jsxs("div",{className:"glass-panel",children:[e.jsx("div",{className:"p-4 border-b border-white/30",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Cari nama atau NIK...",className:"glass-input pl-10",value:a,onChange:h=>s(h.target.value)}),e.jsx(re,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200/50",children:[e.jsx("thead",{className:"bg-purple-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NIK"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tgl Lahir"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alamat"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-transparent divide-y divide-gray-200/50",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading..."})}):c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No creators found"})}):c.map((h,m)=>e.jsxs("tr",{className:m%2===0?"bg-white/50":"bg-white/30",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.nik||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.birth_date?new Date(h.birth_date).toLocaleDateString("en-GB"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-normal text-sm text-gray-500",children:h.address||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("button",{className:"text-purple-600 hover:text-purple-900 p-1 rounded-md hover:bg-purple-50 transition-colors",title:"Lihat Data",children:e.jsx(He,{size:18})})})})]},h.id))})]})})]})]})},Wr=()=>{const[r,t]=u.useState([]),[a,s]=u.useState(!0),[n,i]=u.useState(""),[l,c]=u.useState(1),[h,m]=u.useState(20);u.useEffect(()=>{d()},[]);const d=async()=>{s(!0);try{const v=await I.get("/songs");Array.isArray(v.data)?t(v.data):v.data&&v.data.data&&t(v.data.data)}catch(v){console.error("Failed to fetch songs",v)}finally{s(!1)}},o=r.filter(v=>v.title.toLowerCase().includes(n.toLowerCase())||v.performer&&v.performer.toLowerCase().includes(n.toLowerCase())),p=Math.ceil(o.length/h),w=(l-1)*h,S=o.slice(w,w+h);return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Data Lagu Saya"})}),e.jsxs("div",{className:"glass-panel",children:[e.jsxs("div",{className:"p-4 border-b border-white/30 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Cari lagu...",className:"glass-input pl-10 w-full",value:n,onChange:v=>{i(v.target.value),c(1)}}),e.jsx(re,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Show:"}),e.jsxs("select",{value:h,onChange:v=>{m(Number(v.target.value)),c(1)},className:"glass-input py-1 px-2 text-sm w-20",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200/50",children:[e.jsx("thead",{className:"bg-purple-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Judul"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Artis"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pencipta"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-transparent divide-y divide-gray-200/50",children:a?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading..."})}):S.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Tidak ada lagu ditemukan"})}):S.map((v,j)=>e.jsxs("tr",{className:j%2===0?"bg-white/50":"bg-white/30",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:v.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v.performer||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-normal text-sm text-gray-500",children:v.writers&&v.writers.length>0?v.writers.map(g=>g.name).join(", "):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full uppercase
                          ${(v.status||"pending")==="accepted"?"bg-green-100 text-green-800":(v.status||"pending")==="review"?"bg-yellow-100 text-yellow-800":(v.status||"pending")==="rejected"?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"}`,children:v.status||"pending"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("button",{className:"text-purple-600 hover:text-purple-900 p-1 rounded-md hover:bg-purple-50 transition-colors",title:"Lihat Detail",children:e.jsx(He,{size:18})})})})]},v.id))})]})}),p>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-white/30 flex items-center justify-between bg-white/20",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-medium",children:w+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(w+h,o.length)})," of ",e.jsx("span",{className:"font-medium",children:o.length})," results"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>c(v=>Math.max(v-1,1)),disabled:l===1,className:"px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,p)},(v,j)=>j+1).map(v=>e.jsx("button",{onClick:()=>c(v),className:`px-3 py-1 border rounded-md ${l===v?"bg-purple-600 text-white border-purple-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:v},v)),e.jsx("button",{onClick:()=>c(v=>Math.min(v+1,p)),disabled:l===p,className:"px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})},Se=({title:r})=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-10rem)] text-center p-6",children:[e.jsx("div",{className:"bg-purple-50 p-6 rounded-full mb-6 animate-pulse",children:e.jsx(bs,{size:64,className:"text-[#7A4A88]"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:r}),e.jsx("p",{className:"text-gray-500 max-w-md",children:"Fitur ini sedang dalam tahap pengembangan (Under Construction). Kami sedang bekerja keras untuk segera menghadirkan fitur ini."}),e.jsxs("div",{className:"mt-8 flex gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-300 animate-bounce",style:{animationDelay:"0s"}}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-300 animate-bounce",style:{animationDelay:"0.2s"}}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-300 animate-bounce",style:{animationDelay:"0.4s"}})]})]}),$r=()=>{const r=()=>{window.location.href="/"};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-lg rounded-2xl p-8 text-center shadow-2xl border border-white/20",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-red-500/20 rounded-full animate-pulse",children:e.jsx(ys,{size:48,className:"text-red-400"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"System Offline"}),e.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:"We're currently unable to connect to our servers. This could be due to scheduled maintenance or a temporary network issue."}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 mb-8 text-left border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400 mb-2",children:[e.jsx(lt,{size:16}),e.jsx("span",{children:"Connection Status:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-ping"}),e.jsx("span",{className:"text-red-400 font-medium",children:"Disconnected"})]})]}),e.jsxs("button",{onClick:r,className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 group shadow-lg shadow-blue-500/20",children:[e.jsx(js,{size:20,className:"group-hover:rotate-180 transition-transform duration-500"}),"Try Again"]}),e.jsx("p",{className:"mt-6 text-xs text-gray-500",children:"If the problem persists, please contact support."})]})})};function Yr(){return u.useEffect(()=>{(async()=>{try{const t=await I.get("/settings");if(t.data&&(t.data.company_name&&(document.title=t.data.company_name),t.data.app_icon)){const a=document.querySelector("link[rel*='icon']")||document.createElement("link");a.type="image/x-icon",a.rel="shortcut icon";const n="http://localhost:5000/api".replace("/api","");t.data.app_icon.startsWith("http")?a.href=t.data.app_icon:a.href=`${n}/${t.data.app_icon.replace(/\\/g,"/")}`,document.getElementsByTagName("head")[0].appendChild(a)}}catch(t){console.error("Failed to fetch settings for title/icon",t)}})()},[]),e.jsxs($a,{children:[e.jsx(U,{path:"/maintenance",element:e.jsx($r,{})}),e.jsx(U,{path:"/login",element:e.jsx(Ps,{})}),e.jsx(U,{path:"/register",element:e.jsx(Ls,{})}),e.jsxs(U,{path:"/admin",element:e.jsx(Ms,{}),children:[e.jsx(U,{index:!0,element:e.jsx(Es,{})}),e.jsx(U,{path:"songs",element:e.jsx(zs,{})}),e.jsx(U,{path:"songs/create",element:e.jsx(It,{})}),e.jsx(U,{path:"songs/edit/:id",element:e.jsx(It,{})}),e.jsx(U,{path:"creators",element:e.jsx(Bs,{})}),e.jsx(U,{path:"creators/add",element:e.jsx(ea,{})}),e.jsx(U,{path:"creators/edit/:id",element:e.jsx(ea,{})}),e.jsx(U,{path:"analytics",element:e.jsx(Ir,{})}),e.jsx(U,{path:"reports",element:e.jsx(Er,{})}),e.jsx(U,{path:"reports/import",element:e.jsx(zr,{})}),e.jsx(U,{path:"payments",element:e.jsx(Ur,{})}),e.jsx(U,{path:"payments/:userId",element:e.jsx(Br,{})}),e.jsx(U,{path:"contracts",element:e.jsx(Se,{title:"Kontrak User"})}),e.jsx(U,{path:"users",element:e.jsx(Or,{})}),e.jsx(U,{path:"settings",element:e.jsx(Rr,{})})]}),e.jsxs(U,{path:"/user",element:e.jsx(Rs,{}),children:[e.jsx(U,{index:!0,element:e.jsx(Mr,{})}),e.jsx(U,{path:"creators",element:e.jsx(Fr,{})}),e.jsx(U,{path:"songs",element:e.jsx(Wr,{})}),e.jsx(U,{path:"analytics",element:e.jsx(Se,{title:"Analitik"})}),e.jsx(U,{path:"reports",element:e.jsx(Se,{title:"Report Lagu"})}),e.jsx(U,{path:"payments",element:e.jsx(Se,{title:"Pembayaran"})}),e.jsx(U,{path:"contracts",element:e.jsx(Se,{title:"Kontrak"})}),e.jsx(U,{path:"account",element:e.jsx(Se,{title:"Akun Saya"})})]}),e.jsx(U,{path:"/",element:e.jsx(Ve,{to:"/login",replace:!0})})]})}dt.createRoot(document.getElementById("root")).render(e.jsx(Ue.StrictMode,{children:e.jsx(Ya,{children:e.jsx(As,{children:e.jsx(Yr,{})})})}));
